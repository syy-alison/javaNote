<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-variant-emoji: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: "ï„¥"; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: "ï„£"; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: "ï„£"; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "âˆ’"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left-width: 0.25em; border-left-style: solid; border-left-color: rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}


 @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}
</style><title>javaå®¹å™¨</title>
</head>
<body class='typora-export typora-export-show-outline typora-export-no-collapse-outline'><div class='typora-export-content'>
<div class="typora-export-sidebar"><div class="outline-content"><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#"><strong>ğŸ </strong></a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#1-javaé›†åˆæ¦‚è§ˆ">1ã€ javaé›†åˆæ¦‚è§ˆ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#2-listsetmapqueueå¯¹æ¯”">2ã€ List,set,map,Queueå¯¹æ¯”</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#3-list">3 List</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#31-arraylist">3.1 ArrayList</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#32-vector">3.2 Vector</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#33-linkedlist">3.3 LinkedList</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#4-set">4 Set</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#41-comparableå’Œcomparatorçš„åŒºåˆ«">4.1 comparableå’Œcomparatorçš„åŒºåˆ«</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#42-æ— åºæ€§å’Œä¸å¯é‡å¤æ€§çš„å«ä¹‰æ˜¯ä»€ä¹ˆ">4.2 æ— åºæ€§å’Œä¸å¯é‡å¤æ€§çš„å«ä¹‰æ˜¯ä»€ä¹ˆ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#43-æ¯”è¾ƒhashsetlinkedhashsetå’Œtreesetä¸‰è€…çš„å¼‚åŒ">4.3 æ¯”è¾ƒHashSet,LinkedHashSetå’ŒTreeSetä¸‰è€…çš„å¼‚åŒ</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#5-queue">5 Queue</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#51-queueä¸deque">5.1 Queueä¸Deque</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#52--arraydeque-å’Œ-linkedlist">5.2  ArrayDeque å’Œ LinkedList</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#53-priorityqueue">5.3 PriorityQueue</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#54-blockingqueue">5.4 BlockingQueue</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#6-mapæ¥å£">6 Mapæ¥å£</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#61-hashmap">6.1 HashMap</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#1-å­˜å‚¨ç»“æ„">1. <strong>å­˜å‚¨ç»“æ„</strong></a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#2æºç åˆ†æ">2.æºç åˆ†æ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#hashmapçº¿ç¨‹ä¸å®‰å…¨">HashMapçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#hashmapå¯¹é‡å¤å…ƒç´ çš„æ£€æŸ¥">HashMapå¯¹é‡å¤å…ƒç´ çš„æ£€æŸ¥</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#hashmapçš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹">HashMapçš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#hashmapå¸¸è§çš„éå†æ–¹å¼">HashMapå¸¸è§çš„éå†æ–¹å¼</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#62-concurrenthashmap">6.2 ConcurrentHashMap</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h4"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#jdk17"><strong>JDK1.7</strong></a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h4"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#jdk18">JDK1.8</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#jdk-17-å’Œ-jdk-18-çš„-concurrenthashmap-å®ç°æœ‰ä»€ä¹ˆä¸åŒ">JDK 1.7 å’Œ JDK 1.8 çš„ ConcurrentHashMap å®ç°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#concurrenthashmap-ä¸ºä»€ä¹ˆ-key-å’Œ-value-ä¸èƒ½ä¸º-null">ConcurrentHashMap ä¸ºä»€ä¹ˆ key å’Œ value ä¸èƒ½ä¸º nullï¼Ÿ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#concurrenthashmap-èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—">ConcurrentHashMap èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—ï¼Ÿ</a></div><ul class="outline-children"></ul></li></ul></li></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#å¯¹æ¯”">å¯¹æ¯”</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#arraylist-å’Œ-arrayæ•°ç»„ï¼‰çš„åŒºåˆ«">ArrayList å’Œ Arrayï¼ˆæ•°ç»„ï¼‰çš„åŒºåˆ«</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#arraylistä¸vectorçš„åŒºåˆ«">ArrayListä¸Vectorçš„åŒºåˆ«</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#arraylistä¸linkedlistçš„æ¯”è¾ƒ">ArrayListä¸LinkedListçš„æ¯”è¾ƒ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#hashmapå’Œhashtableçš„åŒºåˆ«">HashMapå’ŒHashTableçš„åŒºåˆ«</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#hashmapå’Œhashsetçš„åŒºåˆ«">HashMapå’ŒHashSetçš„åŒºåˆ«</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#concurrenthashmapå’Œhashtableçš„åŒºåˆ«">ConcurrentHashMapå’ŒHashTableçš„åŒºåˆ«</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#hashmapä¸treemapçš„åŒºåˆ«">HashMapä¸TreeMapçš„åŒºåˆ«</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#æ¯”è¾ƒhashsetlinkedhashsetå’Œtreesetä¸‰è€…çš„å¼‚åŒ">æ¯”è¾ƒHashSet,LinkedHashSetå’ŒTreeSetä¸‰è€…çš„å¼‚åŒ</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#çº¢é»‘æ ‘çš„ç‰¹ç‚¹">çº¢é»‘æ ‘çš„ç‰¹ç‚¹</a></div><ul class="outline-children"></ul></li></ul></li></div></div><div id='write'  class=''><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n3"><a class="md-toc-inner" href="#"><strong>ğŸ </strong></a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n4"><a class="md-toc-inner" href="#1-javaé›†åˆæ¦‚è§ˆ">1ã€ javaé›†åˆæ¦‚è§ˆ</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n11"><a class="md-toc-inner" href="#2-listsetmapqueueå¯¹æ¯”">2ã€ List,set,map,Queueå¯¹æ¯”</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n80"><a class="md-toc-inner" href="#3-list">3 List</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n81"><a class="md-toc-inner" href="#31-arraylist">3.1 ArrayList</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n189"><a class="md-toc-inner" href="#32-vector">3.2 Vector</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n201"><a class="md-toc-inner" href="#33-linkedlist">3.3 LinkedList</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n212"><a class="md-toc-inner" href="#4-set">4 Set</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n213"><a class="md-toc-inner" href="#41-comparableå’Œcomparatorçš„åŒºåˆ«">4.1 comparableå’Œcomparatorçš„åŒºåˆ«</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n226"><a class="md-toc-inner" href="#42-æ— åºæ€§å’Œä¸å¯é‡å¤æ€§çš„å«ä¹‰æ˜¯ä»€ä¹ˆ">4.2 æ— åºæ€§å’Œä¸å¯é‡å¤æ€§çš„å«ä¹‰æ˜¯ä»€ä¹ˆ</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n233"><a class="md-toc-inner" href="#43-æ¯”è¾ƒhashsetlinkedhashsetå’Œtreesetä¸‰è€…çš„å¼‚åŒ">4.3 æ¯”è¾ƒHashSet,LinkedHashSetå’ŒTreeSetä¸‰è€…çš„å¼‚åŒ</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n241"><a class="md-toc-inner" href="#5-queue">5 Queue</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n242"><a class="md-toc-inner" href="#51-queueä¸deque">5.1 Queueä¸Deque</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n294"><a class="md-toc-inner" href="#52--arraydeque-å’Œ-linkedlist">5.2  ArrayDeque å’Œ LinkedList</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n306"><a class="md-toc-inner" href="#53-priorityqueue">5.3 PriorityQueue</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n320"><a class="md-toc-inner" href="#54-blockingqueue">5.4 BlockingQueue</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n340"><a class="md-toc-inner" href="#6-mapæ¥å£">6 Mapæ¥å£</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n341"><a class="md-toc-inner" href="#61-hashmap">6.1 HashMap</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n344"><a class="md-toc-inner" href="#1-å­˜å‚¨ç»“æ„">1. <strong>å­˜å‚¨ç»“æ„</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n356"><a class="md-toc-inner" href="#2æºç åˆ†æ">2.æºç åˆ†æ</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n473"><a class="md-toc-inner" href="#hashmapçº¿ç¨‹ä¸å®‰å…¨">HashMapçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n480"><a class="md-toc-inner" href="#hashmapå¯¹é‡å¤å…ƒç´ çš„æ£€æŸ¥">HashMapå¯¹é‡å¤å…ƒç´ çš„æ£€æŸ¥</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n482"><a class="md-toc-inner" href="#hashmapçš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹">HashMapçš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n486"><a class="md-toc-inner" href="#hashmapå¸¸è§çš„éå†æ–¹å¼">HashMapå¸¸è§çš„éå†æ–¹å¼</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n526"><a class="md-toc-inner" href="#62-concurrenthashmap">6.2 ConcurrentHashMap</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n527"><a class="md-toc-inner" href="#jdk17"><strong>JDK1.7</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n578"><a class="md-toc-inner" href="#jdk18">JDK1.8</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n630"><a class="md-toc-inner" href="#jdk-17-å’Œ-jdk-18-çš„-concurrenthashmap-å®ç°æœ‰ä»€ä¹ˆä¸åŒ">JDK 1.7 å’Œ JDK 1.8 çš„ ConcurrentHashMap å®ç°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n638"><a class="md-toc-inner" href="#concurrenthashmap-ä¸ºä»€ä¹ˆ-key-å’Œ-value-ä¸èƒ½ä¸º-null">ConcurrentHashMap ä¸ºä»€ä¹ˆ key å’Œ value ä¸èƒ½ä¸º nullï¼Ÿ</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n649"><a class="md-toc-inner" href="#concurrenthashmap-èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—">ConcurrentHashMap èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—ï¼Ÿ</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n668"><a class="md-toc-inner" href="#å¯¹æ¯”">å¯¹æ¯”</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n669"><a class="md-toc-inner" href="#arraylist-å’Œ-arrayæ•°ç»„ï¼‰çš„åŒºåˆ«">ArrayList å’Œ Arrayï¼ˆæ•°ç»„ï¼‰çš„åŒºåˆ«</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n688"><a class="md-toc-inner" href="#arraylistä¸vectorçš„åŒºåˆ«">ArrayListä¸Vectorçš„åŒºåˆ«</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n698"><a class="md-toc-inner" href="#arraylistä¸linkedlistçš„æ¯”è¾ƒ">ArrayListä¸LinkedListçš„æ¯”è¾ƒ</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n710"><a class="md-toc-inner" href="#hashmapå’Œhashtableçš„åŒºåˆ«">HashMapå’ŒHashTableçš„åŒºåˆ«</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n733"><a class="md-toc-inner" href="#hashmapå’Œhashsetçš„åŒºåˆ«">HashMapå’ŒHashSetçš„åŒºåˆ«</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n750"><a class="md-toc-inner" href="#concurrenthashmapå’Œhashtableçš„åŒºåˆ«">ConcurrentHashMapå’ŒHashTableçš„åŒºåˆ«</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n768"><a class="md-toc-inner" href="#hashmapä¸treemapçš„åŒºåˆ«">HashMapä¸TreeMapçš„åŒºåˆ«</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n770"><a class="md-toc-inner" href="#æ¯”è¾ƒhashsetlinkedhashsetå’Œtreesetä¸‰è€…çš„å¼‚åŒ">æ¯”è¾ƒHashSet,LinkedHashSetå’ŒTreeSetä¸‰è€…çš„å¼‚åŒ</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n778"><a class="md-toc-inner" href="#çº¢é»‘æ ‘çš„ç‰¹ç‚¹">çº¢é»‘æ ‘çš„ç‰¹ç‚¹</a></span></p></div><p>&nbsp;</p><h1><a href='../../README.html'><strong>ğŸ </strong></a></h1><h1 id='1-javaé›†åˆæ¦‚è§ˆ'><span>1ã€ javaé›†åˆæ¦‚è§ˆ</span></h1><ul><li><p><span>åœ¨javaä¸­ï¼Œé™¤äº†ä»¥</span><code>map</code><span>ç»“å°¾çš„ç±»å¤–ï¼Œå…¶ä»–çš„ç±»éƒ½å®ç°äº†</span><code>Collection</code><span>ç±»ã€‚</span></p></li><li><p><span>ä»¥</span><code>map</code><span>ä¸ºç»“å°¾çš„ç±»éƒ½å®ç°äº†</span><code>map</code><span>æ¥å£ã€‚</span></p></li></ul><p><img src="assets/image-20240615103839737.png" referrerpolicy="no-referrer" alt="image-20240615103839737.png"></p><h1 id='2-listsetmapqueueå¯¹æ¯”'><span>2ã€ List,set,map,Queueå¯¹æ¯”</span></h1><ol start='' ><li><p><strong><span>åº”ç”¨åœºæ™¯</span></strong></p></li></ol><ul><li><p><code>List</code><span>: å­˜å‚¨çš„å…ƒç´ æ˜¯æœ‰åºçš„,å¯é‡å¤çš„ã€‚</span></p></li><li><p><code>set</code><span>: å­˜å‚¨çš„å…ƒç´ æ˜¯æ— åºçš„ï¼Œä¸å¯é‡å¤çš„ã€‚</span></p></li><li><p><code>Queue</code><span>(å®ç°æ’é˜ŸåŠŸèƒ½çš„å«å·æœº): æŒ‰ç‰¹å®šçš„æ’é˜Ÿè§„åˆ™æ¥ç¡®å®šå…ˆåé¡ºåºï¼Œå­˜å‚¨çš„å…ƒç´ æ˜¯æœ‰åºçš„ã€å¯é‡å¤çš„ã€‚</span></p></li><li><p><code>map</code><span>: ä½¿ç”¨é”®å€¼å¯¹(key-value)æ¥å­˜å‚¨,keyæ˜¯æ— åºçš„ï¼Œä¸å¯é‡å¤çš„ï¼Œvalueæ˜¯æ— åºçš„ï¼Œå¯é‡å¤çš„.</span></p></li></ul><ol start='2' ><li><p><strong><span>åº•å±‚æ•°æ®ç»“æ„</span></strong></p></li></ol><ul><li><p><strong><span>List</span></strong></p><ul><li><p><code>ArrayList:</code><span> </span><code>Object[]</code><strong><span>æ•°ç»„</span></strong><span> ï¼Œåˆå§‹å®¹é‡æ˜¯10ï¼Œæ‰©å®¹æ—¶æ–°å®¹é‡å¤§çº¦æ˜¯æ—§å®¹é‡çš„ 1.5 å€å·¦å³ï¼Œæ¯æ¬¡æ‰©å®¹éƒ½è¦æŠŠåŸæ¥çš„æ•°æ®å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œç„¶åå¾€åé¢åŠ å…ƒç´ ã€‚</span></p></li></ul></li></ul><ul><li><p><code>Vector:</code><span> </span><strong><code>Object[]</code><span>æ•°ç»„</span></strong></p></li></ul><ul><li><p><code>LinkedList:</code><span> </span><strong><span>åŒå‘é“¾è¡¨</span></strong><span>ï¼ˆjdk1.6ä¹‹å‰æ˜¯åŒå‘å¾ªç¯é“¾è¡¨ï¼Œjdk1.7å–æ¶ˆäº†å¾ªç¯ï¼‰</span></p></li></ul><ul><li><p><strong><span>set</span></strong></p><ul><li><p><code>HashSet</code><span>: åŸºäº</span><code>HashMap</code><span>å®ç°ï¼Œåº•å±‚é‡‡ç”¨</span><strong><span>hashMap</span></strong><span>æ¥ä¿å­˜å…ƒç´ ,å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿçš„Objectå¯¹è±¡ä½œä¸ºHashMapçš„valueï¼Œå°†æ­¤å¯¹è±¡å®šä¹‰ä¸ºstatic finalã€‚</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Dummy value to associate with an Object in the backing Map</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Object</span> <span class="cm-variable">PRESENT</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-3">Object</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre></li></ul></li></ul><ul><li><p><code>LinkedHashSet</code><span>:æ˜¯</span><code>HashSet</code><span>çš„å­ç±»ï¼ŒåŸºäº</span><code>LinkedHashMap</code><span>å®ç°</span></p></li></ul><ul><li><p><code>TreeSet</code><span>: æœ‰åºï¼Œå”¯ä¸€ï¼Œçº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰</span></p></li></ul><ul><li><p><strong><span>Queue</span></strong></p></li><li><p><code>PriorityQueue</code><span>: </span><strong><code>Object[]</code><span> æ•°ç»„</span></strong><span>æ¥å®ç°äºŒå‰å †</span></p></li><li><p><code>ArrayQueue</code><span>: </span><strong><code>Object[]</code><span> æ•°ç»„</span></strong><span> + åŒæŒ‡é’ˆ</span></p></li><li><p><code>DelayQueue</code><span>:</span><code>PriorityQueue</code><span>ã€‚</span></p></li></ul><ul><li><p><strong><span>Map</span></strong></p><ul><li><p><code>HashMap</code><span>:</span><strong><span>JDK1.8ä¹‹å‰</span></strong><span>é‡‡ç”¨</span><strong><span>æ•°ç»„+é“¾è¡¨</span></strong><span>çš„æ•°æ®ç»“æ„ï¼Œé“¾è¡¨æ˜¯ç”¨äºè§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„;</span><strong><span>JDK1.8ä¹‹å</span></strong><span>é‡‡ç”¨</span><strong><span>æ•°æ®+é“¾è¡¨/çº¢é»‘æ ‘</span></strong><span>çš„æ•°æ®ç»“æ„ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºæŸä¸ªé˜ˆå€¼æ—¶ï¼Œä¼šæŠŠé“¾è¡¨è½¬æˆçº¢é»‘æ ‘(è½¬æˆçº¢é»‘æ ‘ä¹‹å‰ä¼šå…ˆåˆ¤æ–­å½“å‰æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœæ•°ç»„é•¿åº¦å°äº64ï¼Œåˆ™å…ˆä¼šå¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹)ï¼Œå‡å°‘æœç´¢æ—¶é—´ã€‚</span></p></li><li><p><code>LinkedHashMap</code><span>ï¼š</span><strong><span>æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘</span></strong><span>ã€‚åŒæ—¶åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚</span></p></li><li><p><code>HashTable</code><span>ï¼š</span><strong><span>æ•°ç»„+é“¾è¡¨</span></strong><span>ã€‚</span></p></li><li><p><code>TreeMap</code><span>:</span><strong><span>çº¢é»‘æ ‘</span></strong><span>ã€‚</span></p></li></ul></li></ul><h1 id='3-list'><span>3 List</span></h1><h2 id='31-arraylist'><span>3.1 ArrayList</span></h2><p><code>ArrayList</code><span> ç»§æ‰¿äº </span><code>AbstractList</code><span> ï¼Œå®ç°äº† </span><code>List</code><span>, </span><code>RandomAccess</code><span>, </span><code>Cloneable</code><span>, </span><code>java.io.Serializable</code><span> è¿™äº›æ¥å£ã€‚</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ArrayList</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-keyword">extends</span> <span class="cm-variable">AbstractList</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">implements</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span>, <span class="cm-variable">RandomAccess</span>, <span class="cm-variable">Cloneable</span>, <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">Serializable</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><code>List</code><span> : è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ”¯æŒæ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä¸‹æ ‡è¿›è¡Œè®¿é—®ã€‚</span></p><p><code>RandomAccess</code><span> ï¼šè¿™æ˜¯ä¸€ä¸ªæ ‡å¿—æ¥å£ï¼Œè¡¨æ˜å®ç°è¿™ä¸ªæ¥å£çš„ </span><code>List</code><span> é›†åˆæ˜¯æ”¯æŒ </span><strong><span>å¿«é€Ÿéšæœºè®¿é—®</span></strong><span> çš„ã€‚åœ¨ </span><code>ArrayList</code><span> ä¸­ï¼Œæˆ‘ä»¬å³å¯ä»¥é€šè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡ï¼Œè¿™å°±æ˜¯å¿«é€Ÿéšæœºè®¿é—®ã€‚</span></p><p><code>Cloneable</code><span> ï¼šè¡¨æ˜å®ƒå…·æœ‰æ‹·è´èƒ½åŠ›ï¼Œå¯ä»¥è¿›è¡Œæ·±æ‹·è´æˆ–æµ…æ‹·è´æ“ä½œã€‚</span></p><p><code>Serializable</code><span> : è¡¨æ˜å®ƒå¯ä»¥è¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµè¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨æˆ–ç½‘ç»œä¼ è¾“ï¼Œéå¸¸æ–¹ä¾¿ã€‚</span></p><p><code>ArrayList</code><span> ä¸­å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ </span><code>null</code><span> å€¼ã€‚ä¸è¿‡ï¼Œä¸å»ºè®®å‘</span><code>ArrayList</code><span> ä¸­æ·»åŠ  </span><code>null</code><span> å€¼ï¼Œ </span><code>null</code><span> å€¼æ— æ„ä¹‰ï¼Œä¼šè®©ä»£ç éš¾ä»¥ç»´æŠ¤æ¯”å¦‚å¿˜è®°åšåˆ¤ç©ºå¤„ç†å°±ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</span></p><p><strong><span>æºç åˆ†æï¼ˆJDK8ï¼‰</span></strong></p><ol start='' ><li><p><strong><span>ArrayListçš„å±æ€§</span></strong></p></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">long</span> <span class="cm-variable">serialVersionUID</span> <span class="cm-operator">=</span> <span class="cm-number">8683452581122892189L</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* Default initial capacity.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-variable">DEFAULT_CAPACITY</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>;<span class="cm-comment">//é»˜è®¤çš„åˆå§‹å®¹é‡ä¸º10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Object</span>[] <span class="cm-variable">EMPTY_ELEMENTDATA</span> <span class="cm-operator">=</span> {};<span class="cm-comment">//å½“æŒ‡å®šArrayListå®¹é‡ä¸º0æ—¶ï¼Œè¿”å›è¯¥ç©ºæ•°ç»„</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Object</span>[] <span class="cm-variable">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span> <span class="cm-operator">=</span> {};<span class="cm-comment">//å¦‚æœä¸æŒ‡å®šå®¹é‡ä¸º0ï¼Œé»˜è®¤è¿”å›è¯¥æ•°ç»„ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">transient</span> <span class="cm-variable-3">Object</span>[] <span class="cm-variable">elementData</span>; <span class="cm-comment">//ç”¨äºå­˜æ”¾ArrayListçš„æ•°ç»„ï¼Œå½“ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ æ—¶ï¼Œè¯¥æ•°ç»„å°†æ‰©å®¹è‡³DEFAULT_CAPACITY</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">int</span> <span class="cm-variable">size</span>;<span class="cm-comment">//ArrayListçš„å®é™…å¤§å°</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><ol start='2' ><li><p><strong><span>ArrayListçš„æ„é€ å‡½æ•°</span></strong></p></li></ol><ul><li><p><span>é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚(æ— å‚æ„é€ )</span></p></li><li><p><span>å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚(ç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡)</span></p><ul><li><p><span>å¦‚æœå®¹é‡å¤§äº0ï¼Œå°±åˆ›å»ºæŒ‡å®šå®¹é‡çš„æ•°ç»„ã€‚</span></p></li><li><p><span>å¦‚æœå®¹é‡ç­‰äº0ï¼Œå°±åˆ›å»ºç©ºæ•°ç»„ã€‚</span></p></li><li><p><span>å¦‚æœå®¹é‡å°äº0ï¼Œå°±æŠ›å‡ºå¼‚å¸¸</span></p></li></ul></li><li><p><span>æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›ã€‚</span></p></li></ul><blockquote><p><strong><span>ä»¥æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºArrayListæ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ï¼Œå³å‘æ•°ç»„æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º10.</span></strong></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">/**</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ )</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ArrayList</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-variable">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ArrayList</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">initialCapacity</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">initialCapacity</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>) {<span class="cm-comment">//åˆå§‹å®¹é‡å¤§äº0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-3">Object</span>[<span class="cm-variable">initialCapacity</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">initialCapacity</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>) {<span class="cm-comment">//åˆå§‹å®¹é‡ç­‰äº0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//åˆ›å»ºç©ºæ•°ç»„</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-variable">EMPTY_ELEMENTDATA</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {<span class="cm-comment">//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">IllegalArgumentException</span>(<span class="cm-string">"Illegal Capacity: "</span><span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">initialCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">*æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">*å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable">ArrayList</span>(<span class="cm-variable">Collection</span><span class="cm-operator">&lt;?</span> <span class="cm-keyword">extends</span> <span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-variable">c</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>.<span class="cm-variable">toArray</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> ((<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-variable">elementData</span>.<span class="cm-variable">length</span>) <span class="cm-operator">!=</span> <span class="cm-number">0</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">elementData</span>.<span class="cm-variable">getClass</span>() <span class="cm-operator">!=</span> <span class="cm-variable-3">Object</span>[].<span class="cm-keyword">class</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-variable">Arrays</span>.<span class="cm-variable">copyOf</span>(<span class="cm-variable">elementData</span>, <span class="cm-variable">size</span>, <span class="cm-variable-3">Object</span>[].<span class="cm-keyword">class</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// replace with empty array.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-variable">EMPTY_ELEMENTDATA</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 920px;"></div><div class="CodeMirror-gutters" style="display: none; height: 920px;"></div></div></div></pre><ol start='3' ><li><p><strong><span>add(E e)æ–¹æ³•</span></strong></p></li></ol><p><span>  </span><strong><span>æ€»çš„æ¥è¯´å°±æ˜¯å…ˆåˆ¤æ–­ä¸€ä¸‹å®¹é‡æ˜¯å¦è¶³å¤Ÿï¼Œè¶³å¤Ÿçš„è¯å°±ä¸æ‰©å®¹ï¼Œä¸å¤Ÿçš„è¯å°±æ‰©å®¹ï¼Œç„¶åæŠŠåŸæ¥çš„æ•°æ®æ•´ä¸ªå¤åˆ¶åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚</span></strong></p><ul><li><p><strong><span>æ·»åŠ å…ƒç´ ä¹‹å‰éœ€è¦è°ƒç”¨ ensureCapacityInternal() æ–¹æ³•æ¥åˆ¤æ–­å®¹é‡æ˜¯å¦è¶³å¤Ÿ</span></strong><span>ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•°ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å®¹é‡(å½“å‰å®¹é‡+1)</span></p><ul><li><p><span>å½“ç›®å‰çš„elementDataæ•°ç»„ä¸ºç©ºæ—¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ·»åŠ çš„å…ƒç´ æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity = Math.max(minCapacity,DEFAULT_CAPACITY) = 10ã€‚å½“ä¸ä¸ºç©ºæ—¶ï¼ŒminCapacity å°±ç­‰äºæˆ‘ä»¬éœ€è¦çš„å®¹é‡ã€‚</span></p></li><li><p><span>ä¹‹åæ ¹æ®minCapacity (æˆ‘ä»¬éœ€è¦çš„å®¹é‡)è°ƒç”¨ensureExplicitCapacity(minCapacity) æ–¹æ³•åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ã€‚</span></p><ul><li><p><span>å¦‚æœå½“å‰elementDataæ•°ç»„çš„é•¿åº¦å¤§äºminCapacity(æˆ‘ä»¬éœ€è¦çš„å®¹é‡)ï¼Œè¯´æ˜å®¹é‡å……è¶³ï¼Œä¸è¦æ‰©å®¹ï¼Œå°±ä¸éœ€è¦ç»§ç»­ä¸‹å»äº†ã€‚</span></p></li><li><p><strong><span>å¦‚æœå½“å‰elementDataæ•°ç»„çš„é•¿åº¦å°äºminCapacityï¼Œéœ€è¦è°ƒç”¨grow()æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚</span></strong></p><ul><li><p><strong><span>æ–°å®¹é‡çš„å¤§å°ä¸º </span><code>oldCapacity + (oldCapacity &gt;&gt; 1)</code><span>ã€‚æ‰€ä»¥æ–°å®¹é‡å¤§çº¦æ˜¯æ—§å®¹é‡çš„ 1.5 å€å·¦å³ã€‚</span></strong></p></li><li><p><span>ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ã€‚</span></p></li><li><p><span>å¦‚æœæ–°å®¹é‡å¤§äº </span><code>MAX_ARRAY_SIZEï¼ˆInteger.MAX_VALUE - 8ï¼‰</code><span>, è¿›å…¥(æ‰§è¡Œ) </span><code>hugeCapacity()</code><span> æ–¹æ³•æ¥æ¯”è¾ƒ </span><code>minCapacity</code><span> å’Œ </span><code>MAX_ARRAY_SIZE</code><span>ï¼Œå¦‚æœ</span><code>minCapacity</code><span>å¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º</span><code>Integer.MAX_VALUE</code><span>ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º </span><code>MAX_ARRAY_SIZE</code><span> å³ä¸º </span><code>Integer.MAX_VALUE - 8</code><span>ã€‚</span></p></li><li><p><strong><span>è°ƒç”¨</span><code>Arrays.copyOf()</code><span>å°†æŠŠåŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œå¤§å°ä¸ºæ–°å®¹é‡ã€‚</span></strong></p></li></ul></li></ul></li></ul></li><li><p><strong><span>å°†æˆ‘ä»¬è¦æ·»åŠ çš„å…ƒç´ æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚</span></strong></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="Java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">boolean</span> <span class="cm-def">add</span>(<span class="cm-variable">E</span> <span class="cm-variable">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ensureCapacityInternal</span>(<span class="cm-variable">size</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>); &nbsp;<span class="cm-comment">// Increments modCount!!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">elementData</span>[<span class="cm-variable">size</span><span class="cm-operator">++</span>] <span class="cm-operator">=</span> <span class="cm-variable">e</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* åœ¨æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*å…ˆè°ƒç”¨ rangeCheckForAdd å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ï¼›ç„¶åè°ƒç”¨ ensureCapacityInternal æ–¹æ³•ä¿è¯capacityè¶³å¤Ÿå¤§ï¼›</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*å†å°†ä»indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®ï¼›å°†elementæ’å…¥indexä½ç½®ï¼›æœ€åsizeåŠ 1ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">add</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">index</span>, <span class="cm-variable">E</span> <span class="cm-variable">element</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rangeCheckForAdd</span>(<span class="cm-variable">index</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ensureCapacityInternal</span>(<span class="cm-variable">size</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>); &nbsp;<span class="cm-comment">// Increments modCount!!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//arraycopy()æ–¹æ³•å®ç°æ•°ç»„è‡ªå·±å¤åˆ¶è‡ªå·±</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//elementData:æºæ•°ç»„;index:æºæ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®;elementDataï¼šç›®æ ‡æ•°ç»„ï¼›index + 1ï¼šç›®æ ‡æ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®ï¼› size - indexï¼šè¦å¤åˆ¶çš„æ•°ç»„å…ƒç´ çš„æ•°é‡ï¼›</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">arraycopy</span>(<span class="cm-variable">elementData</span>, <span class="cm-variable">index</span>, <span class="cm-variable">elementData</span>, <span class="cm-variable">index</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">size</span> <span class="cm-operator">-</span> <span class="cm-variable">index</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">elementData</span>[<span class="cm-variable">index</span>] <span class="cm-operator">=</span> <span class="cm-variable">element</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">size</span><span class="cm-operator">++</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 621px;"></div><div class="CodeMirror-gutters" style="display: none; height: 621px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//å¾—åˆ°æœ€å°æ‰©å®¹é‡</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">private</span> <span class="cm-variable-3">void</span> <span class="cm-def">ensureCapacityInternal</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">minCapacity</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//å½“ç›®å‰çš„elementData ä¸ºç©ºæ—¶ï¼Œéœ€è¦è·å–æœ€å°å®¹é‡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">elementData</span> <span class="cm-operator">==</span> <span class="cm-variable">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">minCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">Math</span>.<span class="cm-variable">max</span>(<span class="cm-variable">DEFAULT_CAPACITY</span>, <span class="cm-variable">minCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ensureExplicitCapacity</span>(<span class="cm-variable">minCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-variable-3">void</span> <span class="cm-def">ensureExplicitCapacity</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">minCapacity</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">modCount</span><span class="cm-operator">++</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// overflow-conscious code</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">minCapacity</span> <span class="cm-operator">-</span> <span class="cm-variable">elementData</span>.<span class="cm-variable">length</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">grow</span>(<span class="cm-variable">minCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-variable">MAX_ARRAY_SIZE</span> <span class="cm-operator">=</span> <span class="cm-variable-3">Integer</span>.<span class="cm-variable">MAX_VALUE</span> <span class="cm-operator">-</span> <span class="cm-number">8</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">void</span> <span class="cm-def">grow</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">minCapacity</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">oldCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">elementData</span>.<span class="cm-variable">length</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">newCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">oldCapacity</span> <span class="cm-operator">+</span> (<span class="cm-variable">oldCapacity</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">newCapacity</span> <span class="cm-operator">-</span> <span class="cm-variable">minCapacity</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">minCapacity</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">// å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">//å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">newCapacity</span> <span class="cm-operator">-</span> <span class="cm-variable">MAX_ARRAY_SIZE</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">hugeCapacity</span>(<span class="cm-variable">minCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// minCapacity is usually close to size, so this is a win:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-variable">Arrays</span>.<span class="cm-variable">copyOf</span>(<span class="cm-variable">elementData</span>, <span class="cm-variable">newCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">int</span> <span class="cm-def">hugeCapacity</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">minCapacity</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">minCapacity</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0</span>) <span class="cm-comment">// overflow</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">OutOfMemoryError</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> (<span class="cm-variable">minCapacity</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">MAX_ARRAY_SIZE</span>) <span class="cm-operator">?</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">Integer</span>.<span class="cm-variable">MAX_VALUE</span> :</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">MAX_ARRAY_SIZE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1173px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1173px;"></div></div></div></pre><ol start='4' ><li><p><strong><span>åˆ é™¤å…ƒç´ </span></strong></p></li></ol><ul><li><p><strong><span>éœ€è¦è°ƒç”¨ System.arraycopy() å°† index+1 åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ° index ä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œå¯ä»¥çœ‹åˆ° ArrayList åˆ é™¤å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚</span></strong></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable">E</span> <span class="cm-def">remove</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">index</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">rangeCheck</span>(<span class="cm-variable">index</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">modCount</span><span class="cm-operator">++</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">E</span> <span class="cm-variable">oldValue</span> <span class="cm-operator">=</span> <span class="cm-variable">elementData</span>(<span class="cm-variable">index</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">numMoved</span> <span class="cm-operator">=</span> <span class="cm-variable">size</span> <span class="cm-operator">-</span> <span class="cm-variable">index</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">numMoved</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">arraycopy</span>(<span class="cm-variable">elementData</span>, <span class="cm-variable">index</span><span class="cm-operator">+</span><span class="cm-number">1</span>, <span class="cm-variable">elementData</span>, <span class="cm-variable">index</span>, <span class="cm-variable">numMoved</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">elementData</span>[<span class="cm-operator">--</span><span class="cm-variable">size</span>] <span class="cm-operator">=</span> <span class="cm-atom">null</span>; <span class="cm-comment">// clear to let GC do its work</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">oldValue</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><ol start='4' ><li><p><strong><span>ArrayListæ›¿ä»£æ–¹æ¡ˆ</span></strong></p><p><span>å¯ä»¥ä½¿ç”¨ </span><code>Collections.synchronizedList();</code><span> å¾—åˆ°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ ArrayListã€‚</span></p></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">list</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;&gt;</span>();</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">synList</span> <span class="cm-operator">=</span> <span class="cm-variable">Collections</span>.<span class="cm-variable">synchronizedList</span>(<span class="cm-variable">list</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>ä¹Ÿå¯ä»¥ä½¿ç”¨ concurrent å¹¶å‘åŒ…ä¸‹çš„ CopyOnWriteArrayList ç±»ã€‚</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">list</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">CopyOnWriteArrayList</span><span class="cm-operator">&lt;&gt;</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><ol start='5' ><li><p><strong><span>ArrayListæ‰©å®¹çš„æ—¶å€™ä½¿ç”¨æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Ÿ</span></strong></p><p><span>é‡æ–°æ‹·è´çš„æ—¶å€™ï¼Œå¦‚æœæ‹·è´çš„æ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼Œé‡‡ç”¨çš„æ˜¯æ·±æ‹·è´ã€‚è€Œæ‹·è´çš„æ˜¯å¼•ç”¨æ•°æ®ç±»å‹æ—¶é‡‡ç”¨çš„æ˜¯æµ…æ‹·è´.</span></p><p><code>System.arraycopy()</code><span> æ–¹æ³•ç”¨äºæ•°ç»„ä¹‹é—´çš„å¤åˆ¶ï¼Œä½†å®ƒæ˜¯æµ…æ‹·è´ï¼ˆshallow copyï¼‰ã€‚è¿™æ„å‘³ç€å®ƒåªä¼šå¤åˆ¶æ•°ç»„å…ƒç´ çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¤åˆ¶å…ƒç´ æœ¬èº«ã€‚å¦‚æœæ•°ç»„ä¸­åŒ…å«å¯¹è±¡å¼•ç”¨ï¼Œé‚£ä¹ˆ</span><code>arraycopy</code><span>æ–¹æ³•ä¼šå¤åˆ¶è¿™äº›å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ã€‚å› æ­¤ï¼ŒåŸå§‹æ•°ç»„å’Œå¤åˆ¶åçš„æ•°ç»„å°†æŒ‡å‘ç›¸åŒçš„å¯¹è±¡å®ä¾‹ã€‚</span></p></li><li><p><strong><code>System.arraycopy()</code><span>ä¸</span><code>Arrays.copyOf()</code><span>çš„åŒºåˆ«ä¸è”ç³»ã€‚</span></strong></p></li></ol><ul><li><p><span>çœ‹ä¸¤è€…æºä»£ç å¯ä»¥å‘ç° </span><code>copyOf()</code><span>å†…éƒ¨å®é™…è°ƒç”¨äº† </span><code>System.arraycopy()</code><span> æ–¹æ³•</span></p></li><li><p><code>arraycopy()</code><span> éœ€è¦ç›®æ ‡æ•°ç»„ï¼Œå°†åŸæ•°ç»„æ‹·è´åˆ°ä½ è‡ªå·±å®šä¹‰çš„æ•°ç»„é‡Œæˆ–è€…åŸæ•°ç»„ï¼Œè€Œä¸”å¯ä»¥é€‰æ‹©æ‹·è´çš„èµ·ç‚¹å’Œé•¿åº¦ä»¥åŠæ”¾å…¥æ–°æ•°ç»„ä¸­çš„ä½ç½® </span><code>copyOf()</code><span> æ˜¯ç³»ç»Ÿè‡ªåŠ¨åœ¨å†…éƒ¨æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚</span></p></li></ul><ol start='7' ><li><p><strong><span>ArrayList æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦</span></strong></p></li></ol><p><span>å¯¹äºæ’å…¥ï¼š</span></p><ul><li><p><span>å¤´éƒ¨æ’å…¥ï¼šç”±äºéœ€è¦å°†æ‰€æœ‰å…ƒç´ éƒ½ä¾æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</span></p></li><li><p><span>å°¾éƒ¨æ’å…¥ï¼šå½“ </span><code>ArrayList</code><span> çš„å®¹é‡æœªè¾¾åˆ°æé™æ—¶ï¼Œå¾€åˆ—è¡¨æœ«å°¾æ’å…¥å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œå› ä¸ºå®ƒåªéœ€è¦åœ¨æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ å³å¯ï¼›å½“å®¹é‡å·²è¾¾åˆ°æé™å¹¶ä¸”éœ€è¦æ‰©å®¹æ—¶ï¼Œåˆ™éœ€è¦æ‰§è¡Œä¸€æ¬¡ O(n) çš„æ“ä½œå°†åŸæ•°ç»„å¤åˆ¶åˆ°æ–°çš„æ›´å¤§çš„æ•°ç»„ä¸­ï¼Œç„¶åå†æ‰§è¡Œ O(1) çš„æ“ä½œæ·»åŠ å…ƒç´ ã€‚</span></p></li><li><p><span>æŒ‡å®šä½ç½®æ’å…¥ï¼šéœ€è¦å°†ç›®æ ‡ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ éƒ½å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œç„¶åå†æŠŠæ–°å…ƒç´ æ”¾å…¥æŒ‡å®šä½ç½®ã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç§»åŠ¨å¹³å‡ n/2 ä¸ªå…ƒç´ ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</span></p></li></ul><p><span>å¯¹äºåˆ é™¤ï¼š</span></p><ul><li><p><span>å¤´éƒ¨åˆ é™¤ï¼šç”±äºéœ€è¦å°†æ‰€æœ‰å…ƒç´ ä¾æ¬¡å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</span></p></li><li><p><span>å°¾éƒ¨åˆ é™¤ï¼šå½“åˆ é™¤çš„å…ƒç´ ä½äºåˆ—è¡¨æœ«å°¾æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚</span></p></li><li><p><span>æŒ‡å®šä½ç½®åˆ é™¤ï¼šéœ€è¦å°†ç›®æ ‡å…ƒç´ ä¹‹åçš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ä»¥å¡«è¡¥è¢«åˆ é™¤çš„ç©ºç™½ä½ç½®ï¼Œå› æ­¤éœ€è¦ç§»åŠ¨å¹³å‡ n/2 ä¸ªå…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</span></p></li></ul><h2 id='32-vector'><span>3.2 Vector</span></h2><ol start='' ><li><p><strong><span>åŒæ­¥</span></strong></p><p><span>å®ƒçš„å®ç°ä¸ ArrayList ç±»ä¼¼ï¼Œä½†æ˜¯ä½¿ç”¨äº† synchronized è¿›è¡ŒåŒæ­¥ã€‚</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">synchronized</span> <span class="cm-variable-3">boolean</span> <span class="cm-def">add</span>(<span class="cm-variable">E</span> <span class="cm-variable">e</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">modCount</span><span class="cm-operator">++</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ensureCapacityHelper</span>(<span class="cm-variable">elementCount</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">elementData</span>[<span class="cm-variable">elementCount</span><span class="cm-operator">++</span>] <span class="cm-operator">=</span> <span class="cm-variable">e</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">synchronized</span> <span class="cm-variable">E</span> <span class="cm-def">get</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">index</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">index</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">elementCount</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayIndexOutOfBoundsException</span>(<span class="cm-variable">index</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">elementData</span>(<span class="cm-variable">index</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre></li><li><p><strong><span>æ‰©å®¹</span></strong></p><p><strong><span>Vector çš„æ„é€ å‡½æ•°å¯ä»¥ä¼ å…¥ capacityIncrement å‚æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨æ‰©å®¹æ—¶ä½¿å®¹é‡ capacity å¢é•¿ capacityIncrementã€‚å¦‚æœè¿™ä¸ªå‚æ•°çš„å€¼å°äºç­‰äº 0ï¼Œæ‰©å®¹æ—¶æ¯æ¬¡éƒ½ä»¤ capacity ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable">Vector</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">initialCapacity</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">capacityIncrement</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">super</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">initialCapacity</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">IllegalArgumentException</span>(<span class="cm-string">"Illegal Capacity: "</span><span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">initialCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-3">Object</span>[<span class="cm-variable">initialCapacity</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">capacityIncrement</span> <span class="cm-operator">=</span> <span class="cm-variable">capacityIncrement</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-variable-3">void</span> <span class="cm-def">grow</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">minCapacity</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// overflow-conscious code</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">oldCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">elementData</span>.<span class="cm-variable">length</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">newCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">oldCapacity</span> <span class="cm-operator">+</span> ((<span class="cm-variable">capacityIncrement</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>) <span class="cm-operator">?</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">capacityIncrement</span> : <span class="cm-variable">oldCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">newCapacity</span> <span class="cm-operator">-</span> <span class="cm-variable">minCapacity</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">minCapacity</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">newCapacity</span> <span class="cm-operator">-</span> <span class="cm-variable">MAX_ARRAY_SIZE</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">hugeCapacity</span>(<span class="cm-variable">minCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">elementData</span> <span class="cm-operator">=</span> <span class="cm-variable">Arrays</span>.<span class="cm-variable">copyOf</span>(<span class="cm-variable">elementData</span>, <span class="cm-variable">newCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 460px;"></div><div class="CodeMirror-gutters" style="display: none; height: 460px;"></div></div></div></pre><p><strong><span>è°ƒç”¨æ²¡æœ‰ capacityIncrement çš„æ„é€ å‡½æ•°æ—¶ï¼ŒcapacityIncrement å€¼è¢«è®¾ç½®ä¸º 0ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹ Vector æ¯æ¬¡æ‰©å®¹æ—¶å®¹é‡éƒ½ä¼šç¿»å€ã€‚</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable">Vector</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">initialCapacity</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>(<span class="cm-variable">initialCapacity</span>, <span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable">Vector</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>(<span class="cm-number">10</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre></li></ol><h2 id='33-linkedlist'><span>3.3 LinkedList</span></h2><p><img src="./images/LinkedList.png" referrerpolicy="no-referrer"></p><p><span>åŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œä½¿ç”¨ Node å­˜å‚¨é“¾è¡¨èŠ‚ç‚¹ä¿¡æ¯ã€‚</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">class</span> <span class="cm-def">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">E</span> <span class="cm-variable">item</span>;<span class="cm-comment">// èŠ‚ç‚¹å€¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-variable">next</span>; <span class="cm-comment">// æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåç»§èŠ‚ç‚¹ï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-variable">prev</span>; <span class="cm-comment">// æŒ‡å‘çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå‰é©±ç»“ç‚¹ï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// åˆå§‹åŒ–å‚æ•°é¡ºåºåˆ†åˆ«æ˜¯ï¼šå‰é©±ç»“ç‚¹ã€æœ¬èº«èŠ‚ç‚¹å€¼ã€åç»§èŠ‚ç‚¹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Node</span>(<span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-variable">prev</span>, <span class="cm-variable">E</span> <span class="cm-variable">element</span>, <span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-variable">next</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">item</span> <span class="cm-operator">=</span> <span class="cm-variable">element</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">next</span> <span class="cm-operator">=</span> <span class="cm-variable">next</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">prev</span> <span class="cm-operator">=</span> <span class="cm-variable">prev</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p><span>æ¯ä¸ªé“¾è¡¨å­˜å‚¨äº† first å’Œ last æŒ‡é’ˆï¼š</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">transient</span> <span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-variable">first</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">transient</span> <span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-variable">last</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><strong><span>LinkedList æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ï¼Ÿ</span></strong></p><p><span>å¤´éƒ¨æ’å…¥/åˆ é™¤ï¼šåªéœ€è¦ä¿®æ”¹å¤´ç»“ç‚¹çš„æŒ‡é’ˆå³å¯å®Œæˆæ’å…¥/åˆ é™¤æ“ä½œï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚</span></p><p><span>å°¾éƒ¨æ’å…¥/åˆ é™¤ï¼šåªéœ€è¦ä¿®æ”¹å°¾ç»“ç‚¹çš„æŒ‡é’ˆå³å¯å®Œæˆæ’å…¥/åˆ é™¤æ“ä½œï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚</span></p><p><span>æŒ‡å®šä½ç½®æ’å…¥/åˆ é™¤ï¼šéœ€è¦å…ˆç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œå†ä¿®æ”¹æŒ‡å®šèŠ‚ç‚¹çš„æŒ‡é’ˆå®Œæˆæ’å…¥/åˆ é™¤ï¼Œå› æ­¤éœ€è¦éå†å¹³å‡ n/2 ä¸ªå…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</span></p><p>&nbsp;</p><h1 id='4-set'><span>4 Set</span></h1><h2 id='41-comparableå’Œcomparatorçš„åŒºåˆ«'><span>4.1 comparableå’Œcomparatorçš„åŒºåˆ«</span></h2><ul><li><p><code>comparable</code><span>æ¥å£å®é™…ä¸Šå‡ºè‡ª</span><code>java.lang</code><span>åŒ…æœ‰ä¸€ä¸ª</span><code>compareTo(Object obj)</code><span>æ–¹æ³•ç”¨æ¥æ’åºã€‚</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// personå¯¹è±¡æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œæ‰€ä»¥å¿…é¡»å®ç°ï¼Œè¿™æ ·æ‰ä¸ä¼šå‡ºé”™ï¼Œæ‰å¯ä»¥ä½¿treemapä¸­çš„æ•°æ®æŒ‰é¡ºåºæ’åˆ—</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// å‰é¢ä¸€ä¸ªä¾‹å­çš„Stringç±»å·²ç»é»˜è®¤å®ç°äº†Comparableæ¥å£ï¼Œè¯¦ç»†å¯ä»¥æŸ¥çœ‹Stringç±»çš„APIæ–‡æ¡£ï¼Œå¦å¤–å…¶ä»–</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// åƒIntegerç±»ç­‰éƒ½å·²ç»å®ç°äº†Comparableæ¥å£ï¼Œæ‰€ä»¥ä¸éœ€è¦å¦å¤–å®ç°äº†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> &nbsp;<span class="cm-keyword">class</span> <span class="cm-def">Person</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Comparable</span><span class="cm-operator">&lt;</span><span class="cm-variable">Person</span><span class="cm-operator">&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">int</span> <span class="cm-variable">age</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Person</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">age</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-variable">age</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setName</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">int</span> <span class="cm-variable">getAge</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">age</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setAge</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">age</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-variable">age</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* Té‡å†™compareToæ–¹æ³•å®ç°æŒ‰å¹´é¾„æ¥æ’åº</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">int</span> <span class="cm-variable">compareTo</span>(<span class="cm-variable">Person</span> <span class="cm-variable">o</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-variable">age</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">o</span>.<span class="cm-variable">getAge</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-variable">age</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">o</span>.<span class="cm-variable">getAge</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-operator">-</span><span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 989px;"></div><div class="CodeMirror-gutters" style="display: none; height: 989px;"></div></div></div></pre><p>&nbsp;</p><ul><li><p><code>comparator</code><span>æ¥å£å®é™…ä¸Šå‡ºè‡ª</span><code>java.util</code><span>åŒ…å®ƒæœ‰ä¸€ä¸ª</span><code>compare(Object obj1,Object obj2)</code><span>æ–¹æ³•æ¥æ’åºã€‚</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span><span class="cm-operator">&gt;</span> <span class="cm-variable">arrayList</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span><span class="cm-operator">&gt;</span>();</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-operator">-</span><span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-number">3</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-number">3</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-operator">-</span><span class="cm-number">5</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-number">7</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-number">4</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-operator">-</span><span class="cm-number">9</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arrayList</span>.<span class="cm-variable">add</span>(<span class="cm-operator">-</span><span class="cm-number">7</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"åŸå§‹æ•°ç»„:"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">arrayList</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// void reverse(List list)ï¼šåè½¬</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Collections</span>.<span class="cm-variable">reverse</span>(<span class="cm-variable">arrayList</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"Collections.reverse(arrayList):"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">arrayList</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// void sort(List list),æŒ‰è‡ªç„¶æ’åºçš„å‡åºæ’åº</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Collections</span>.<span class="cm-variable">sort</span>(<span class="cm-variable">arrayList</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"Collections.sort(arrayList):"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">arrayList</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å®šåˆ¶æ’åºçš„ç”¨æ³•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Collections</span>.<span class="cm-variable">sort</span>(<span class="cm-variable">arrayList</span>, <span class="cm-keyword">new</span> <span class="cm-variable">Comparator</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span><span class="cm-operator">&gt;</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">int</span> <span class="cm-variable">compare</span>(<span class="cm-variable-3">Integer</span> <span class="cm-variable">o1</span>, <span class="cm-variable-3">Integer</span> <span class="cm-variable">o2</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">o2</span>.<span class="cm-variable">compareTo</span>(<span class="cm-variable">o1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"å®šåˆ¶æ’åºåï¼š"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">arrayList</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 713px;"></div><div class="CodeMirror-gutters" style="display: none; height: 713px;"></div></div></div></pre><p>&nbsp;</p><ul><li><p><span>ä¸€èˆ¬éœ€è¦å¯¹ä¸€ä¸ªé›†åˆä½¿ç”¨è‡ªå®šä¹‰æ’åºæ—¶ï¼Œéœ€è¦é‡å†™</span><code>compareTo(Object obj)</code><span>æˆ–è€…</span><code>compare(Object obj1,Object obj2)</code><span>æ–¹æ³•ã€‚</span></p></li></ul><h2 id='42-æ— åºæ€§å’Œä¸å¯é‡å¤æ€§çš„å«ä¹‰æ˜¯ä»€ä¹ˆ'><span>4.2 æ— åºæ€§å’Œä¸å¯é‡å¤æ€§çš„å«ä¹‰æ˜¯ä»€ä¹ˆ</span></h2><ul><li><p><span>æ— åºæ€§ä¸ç­‰äºéšæœºæ€§ ï¼Œæ— åºæ€§æ˜¯æŒ‡å­˜å‚¨çš„æ•°æ®åœ¨åº•å±‚æ•°ç»„ä¸­å¹¶éæŒ‰ç…§æ•°ç»„ç´¢å¼•çš„é¡ºåºæ·»åŠ  ï¼Œè€Œæ˜¯æ ¹æ®æ•°æ®çš„å“ˆå¸Œå€¼å†³å®šçš„ã€‚</span></p></li><li><p><span>ä¸å¯é‡å¤æ€§æ˜¯æŒ‡æ·»åŠ çš„å…ƒç´ æŒ‰ç…§ </span><code>equals()</code><span> åˆ¤æ–­æ—¶ ï¼Œè¿”å› falseï¼Œéœ€è¦åŒæ—¶é‡å†™ </span><code>equals()</code><span> æ–¹æ³•å’Œ </span><code>hashCode()</code><span> æ–¹æ³•ã€‚</span></p></li></ul><h2 id='43-æ¯”è¾ƒhashsetlinkedhashsetå’Œtreesetä¸‰è€…çš„å¼‚åŒ'><span>4.3 æ¯”è¾ƒHashSet,LinkedHashSetå’ŒTreeSetä¸‰è€…çš„å¼‚åŒ</span></h2><ul><li><p><code>HashSet</code><span>çš„åº•å±‚æ˜¯</span><code>HashMap</code><span>,çº¿ç¨‹ä¸å®‰å…¨ï¼Œå¯ä»¥å­˜nullå€¼ã€‚</span></p></li><li><p><code>LinkedHashSet</code><span>æ˜¯</span><code>HashSet</code><span>çš„å­ç±»ï¼Œèƒ½å¤ŸæŒ‰ç…§æ·»åŠ çš„é¡ºåºéå†ã€‚åº•å±‚æ•°æ®ç»“æ„æ˜¯é“¾è¡¨å’Œå“ˆå¸Œè¡¨ï¼Œå…ƒç´ çš„æ’å…¥å’Œå–å‡ºé¡ºåºæ»¡è¶³ FIFOã€‚</span></p></li><li><p><code>TreeSet</code><span>åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ï¼Œèƒ½å¤ŸæŒ‰ç…§æ·»åŠ å…ƒç´ çš„é¡ºåºè¿›è¡Œéå†ï¼Œæ’åºçš„æ–¹å¼æœ‰è‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºã€‚</span></p></li></ul><h1 id='5-queue'><span>5 Queue</span></h1><h2 id='51-queueä¸deque'><span>5.1 Queueä¸Deque</span></h2><p><code>Queue</code><span> æ˜¯å•ç«¯é˜Ÿåˆ—ï¼Œåªèƒ½ä»ä¸€ç«¯æ’å…¥å…ƒç´ ï¼Œå¦ä¸€ç«¯åˆ é™¤å…ƒç´ ï¼Œå®ç°ä¸Šä¸€èˆ¬éµå¾ª </span><strong><span>å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰</span></strong><span> è§„åˆ™ã€‚</span></p><p><code>Queue</code><span> æ‰©å±•äº† </span><code>Collection</code><span> çš„æ¥å£ï¼Œæ ¹æ® </span><strong><span>å› ä¸ºå®¹é‡é—®é¢˜è€Œå¯¼è‡´æ“ä½œå¤±è´¥åå¤„ç†æ–¹å¼çš„ä¸åŒ</span></strong><span> å¯ä»¥åˆ†ä¸ºä¸¤ç±»æ–¹æ³•: ä¸€ç§åœ¨æ“ä½œå¤±è´¥åä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦ä¸€ç§åˆ™ä¼šè¿”å›ç‰¹æ®Šå€¼ã€‚</span></p><figure class='table-figure'><table><thead><tr><th><code>Queue</code><span> æ¥å£</span></th><th><span>æŠ›å‡ºå¼‚å¸¸</span></th><th><span>è¿”å›ç‰¹æ®Šå€¼</span></th></tr></thead><tbody><tr><td><span>æ’å…¥é˜Ÿå°¾</span></td><td><span>add(E e)</span></td><td><span>offer(E e)</span></td></tr><tr><td><span>åˆ é™¤é˜Ÿé¦–</span></td><td><span>remove()</span></td><td><span>poll()</span></td></tr><tr><td><span>æŸ¥è¯¢é˜Ÿé¦–å…ƒç´ </span></td><td><span>element()</span></td><td><span>peek()</span></td></tr></tbody></table></figure><p><code>Deque</code><span> æ˜¯åŒç«¯é˜Ÿåˆ—ï¼Œåœ¨é˜Ÿåˆ—çš„ä¸¤ç«¯å‡å¯ä»¥æ’å…¥æˆ–åˆ é™¤å…ƒç´ ã€‚</span></p><p><code>Deque</code><span> æ‰©å±•äº† </span><code>Queue</code><span> çš„æ¥å£, å¢åŠ äº†åœ¨é˜Ÿé¦–å’Œé˜Ÿå°¾è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„æ–¹æ³•ï¼ŒåŒæ ·æ ¹æ®å¤±è´¥åå¤„ç†æ–¹å¼çš„ä¸åŒåˆ†ä¸ºä¸¤ç±»ï¼š</span></p><figure class='table-figure'><table><thead><tr><th><code>Deque</code><span> æ¥å£</span></th><th><span>æŠ›å‡ºå¼‚å¸¸</span></th><th><span>è¿”å›ç‰¹æ®Šå€¼</span></th></tr></thead><tbody><tr><td><span>æ’å…¥é˜Ÿé¦–</span></td><td><span>addFirst(E e)</span></td><td><span>offerFirst(E e)</span></td></tr><tr><td><span>æ’å…¥é˜Ÿå°¾</span></td><td><span>addLast(E e)</span></td><td><span>offerLast(E e)</span></td></tr><tr><td><span>åˆ é™¤é˜Ÿé¦–</span></td><td><span>removeFirst()</span></td><td><span>pollFirst()</span></td></tr><tr><td><span>åˆ é™¤é˜Ÿå°¾</span></td><td><span>removeLast()</span></td><td><span>pollLast()</span></td></tr><tr><td><span>æŸ¥è¯¢é˜Ÿé¦–å…ƒç´ </span></td><td><span>getFirst()</span></td><td><span>peekFirst()</span></td></tr><tr><td><span>æŸ¥è¯¢é˜Ÿå°¾å…ƒç´ </span></td><td><span>getLast()</span></td><td><span>peekLast()</span></td></tr></tbody></table></figure><p><span>äº‹å®ä¸Šï¼Œ</span><code>Deque</code><span> è¿˜æä¾›æœ‰ </span><code>push()</code><span> å’Œ </span><code>pop()</code><span> ç­‰å…¶ä»–æ–¹æ³•ï¼Œå¯ç”¨äºæ¨¡æ‹Ÿæ ˆã€‚</span></p><h2 id='52--arraydeque-å’Œ-linkedlist'><span>5.2  ArrayDeque å’Œ LinkedList</span></h2><p><code>ArrayDeque</code><span> å’Œ </span><code>LinkedList</code><span> éƒ½å®ç°äº† </span><code>Deque</code><span> æ¥å£ï¼Œä¸¤è€…éƒ½å…·æœ‰é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œä½†ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</span></p><ul><li><p><code>ArrayDeque</code><span> æ˜¯åŸºäºå¯å˜é•¿çš„æ•°ç»„å’ŒåŒæŒ‡é’ˆæ¥å®ç°ï¼Œè€Œ </span><code>LinkedList</code><span> åˆ™é€šè¿‡é“¾è¡¨æ¥å®ç°ã€‚</span></p></li><li><p><code>ArrayDeque</code><span> ä¸æ”¯æŒå­˜å‚¨ </span><code>NULL</code><span> æ•°æ®ï¼Œä½† </span><code>LinkedList</code><span> æ”¯æŒã€‚</span></p></li><li><p><code>ArrayDeque</code><span> æ˜¯åœ¨ JDK1.6 æ‰è¢«å¼•å…¥çš„ï¼Œè€Œ</span><code>LinkedList</code><span> æ—©åœ¨ JDK1.2 æ—¶å°±å·²ç»å­˜åœ¨ã€‚</span></p></li><li><p><code>ArrayDeque</code><span> æ’å…¥æ—¶å¯èƒ½å­˜åœ¨æ‰©å®¹è¿‡ç¨‹, ä¸è¿‡å‡æ‘Šåçš„æ’å…¥æ“ä½œä¾ç„¶ä¸º O(1)ã€‚è™½ç„¶ </span><code>LinkedList</code><span> ä¸éœ€è¦æ‰©å®¹ï¼Œä½†æ˜¯æ¯æ¬¡æ’å…¥æ•°æ®æ—¶å‡éœ€è¦ç”³è¯·æ–°çš„å †ç©ºé—´ï¼Œå‡æ‘Šæ€§èƒ½ç›¸æ¯”æ›´æ…¢ã€‚</span></p></li></ul><p><span>ä»æ€§èƒ½çš„è§’åº¦ä¸Šï¼Œé€‰ç”¨ </span><code>ArrayDeque</code><span> æ¥å®ç°é˜Ÿåˆ—è¦æ¯” </span><code>LinkedList</code><span> æ›´å¥½ã€‚æ­¤å¤–ï¼Œ</span><code>ArrayDeque</code><span> ä¹Ÿå¯ä»¥ç”¨äºå®ç°æ ˆã€‚</span></p><h2 id='53-priorityqueue'><span>5.3 PriorityQueue</span></h2><p><code>PriorityQueue</code><span> æ˜¯åœ¨ JDK1.5 ä¸­è¢«å¼•å…¥çš„, å…¶ä¸ </span><code>Queue</code><span> çš„åŒºåˆ«åœ¨äºå…ƒç´ å‡ºé˜Ÿé¡ºåºæ˜¯ä¸ä¼˜å…ˆçº§ç›¸å…³çš„ï¼Œå³æ€»æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ å…ˆå‡ºé˜Ÿã€‚</span></p><p><span>è¿™é‡Œåˆ—ä¸¾å…¶ç›¸å…³çš„ä¸€äº›è¦ç‚¹ï¼š</span></p><ul><li><p><code>PriorityQueue</code><span> åˆ©ç”¨äº†äºŒå‰å †çš„æ•°æ®ç»“æ„æ¥å®ç°çš„ï¼Œåº•å±‚ä½¿ç”¨å¯å˜é•¿çš„æ•°ç»„æ¥å­˜å‚¨æ•°æ®</span></p></li><li><p><code>PriorityQueue</code><span> é€šè¿‡å †å…ƒç´ çš„ä¸Šæµ®å’Œä¸‹æ²‰ï¼Œå®ç°äº†åœ¨ O(logn) çš„æ—¶é—´å¤æ‚åº¦å†…æ’å…¥å…ƒç´ å’Œåˆ é™¤å †é¡¶å…ƒç´ ã€‚</span></p></li><li><p><code>PriorityQueue</code><span> æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œä¸”ä¸æ”¯æŒå­˜å‚¨ </span><code>NULL</code><span> å’Œ </span><code>non-comparable</code><span> çš„å¯¹è±¡ã€‚</span></p></li><li><p><code>PriorityQueue</code><span> é»˜è®¤æ˜¯</span><strong><span>å°é¡¶å †</span></strong><span>ï¼Œä½†å¯ä»¥æ¥æ”¶ä¸€ä¸ª </span><code>Comparator</code><span> ä½œä¸ºæ„é€ å‚æ•°ï¼Œä»è€Œæ¥è‡ªå®šä¹‰å…ƒç´ ä¼˜å…ˆçº§çš„å…ˆåã€‚</span></p></li></ul><p><code>PriorityQueue</code><span> åœ¨é¢è¯•ä¸­å¯èƒ½æ›´å¤šçš„ä¼šå‡ºç°åœ¨æ‰‹æ’•ç®—æ³•çš„æ—¶å€™ï¼Œå…¸å‹ä¾‹é¢˜åŒ…æ‹¬å †æ’åºã€æ±‚ç¬¬Kå¤§çš„æ•°ã€å¸¦æƒå›¾çš„éå†ç­‰ï¼Œæ‰€ä»¥éœ€è¦ä¼šç†Ÿç»ƒä½¿ç”¨æ‰è¡Œã€‚</span></p><p>&nbsp;</p><h2 id='54-blockingqueue'><span>5.4 BlockingQueue</span></h2><p><code>BlockingQueue</code><span> ï¼ˆé˜»å¡é˜Ÿåˆ—ï¼‰æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿è‡ª </span><code>Queue</code><span>ã€‚</span><code>BlockingQueue</code><span>é˜»å¡çš„åŸå› æ˜¯å…¶æ”¯æŒå½“é˜Ÿåˆ—æ²¡æœ‰å…ƒç´ æ—¶ä¸€ç›´é˜»å¡ï¼Œç›´åˆ°æœ‰å…ƒç´ ï¼›è¿˜æ”¯æŒå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œä¸€ç›´ç­‰åˆ°é˜Ÿåˆ—å¯ä»¥æ”¾å…¥æ–°å…ƒç´ æ—¶å†æ”¾å…¥ã€‚</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">BlockingQueue</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Queue</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><code>BlockingQueue</code><span> å¸¸ç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œç”Ÿäº§è€…çº¿ç¨‹ä¼šå‘é˜Ÿåˆ—ä¸­æ·»åŠ æ•°æ®ï¼Œè€Œæ¶ˆè´¹è€…çº¿ç¨‹ä¼šä»é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®è¿›è¡Œå¤„ç†ã€‚</span></p><p><img src="assets/image-20240615195827727.png" referrerpolicy="no-referrer" alt="image-20240615195827727.png"></p><p><img src="/assets/image-20240615195842244.png" referrerpolicy="no-referrer" alt="image-20240615195842244"></p><p><span>Java ä¸­å¸¸ç”¨çš„é˜»å¡é˜Ÿåˆ—å®ç°ç±»æœ‰ä»¥ä¸‹å‡ ç§ï¼š</span></p><ol start='' ><li><p><code>ArrayBlockingQueue</code><span>ï¼šä½¿ç”¨æ•°ç»„å®ç°çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚åœ¨åˆ›å»ºæ—¶éœ€è¦æŒ‡å®šå®¹é‡å¤§å°ï¼Œå¹¶æ”¯æŒå…¬å¹³å’Œéå…¬å¹³ä¸¤ç§æ–¹å¼çš„é”è®¿é—®æœºåˆ¶ã€‚</span></p></li><li><p><code>LinkedBlockingQueue</code><span>ï¼šä½¿ç”¨å•å‘é“¾è¡¨å®ç°çš„å¯é€‰æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚åœ¨åˆ›å»ºæ—¶å¯ä»¥æŒ‡å®šå®¹é‡å¤§å°ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤ä¸º</span><code>Integer.MAX_VALUE</code><span>ã€‚å’Œ</span><code>ArrayBlockingQueue</code><span>ä¸åŒçš„æ˜¯ï¼Œ å®ƒä»…æ”¯æŒéå…¬å¹³çš„é”è®¿é—®æœºåˆ¶ã€‚</span></p></li><li><p><code>PriorityBlockingQueue</code><span>ï¼šæ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚å…ƒç´ å¿…é¡»å®ç°</span><code>Comparable</code><span>æ¥å£æˆ–è€…åœ¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥</span><code>Comparator</code><span>å¯¹è±¡ï¼Œå¹¶ä¸”ä¸èƒ½æ’å…¥ null å…ƒç´ ã€‚</span></p></li><li><p><code>SynchronousQueue</code><span>ï¼šåŒæ­¥é˜Ÿåˆ—ï¼Œæ˜¯ä¸€ç§ä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚æ¯ä¸ªæ’å…¥æ“ä½œéƒ½å¿…é¡»ç­‰å¾…å¯¹åº”çš„åˆ é™¤æ“ä½œï¼Œåä¹‹åˆ é™¤æ“ä½œä¹Ÿå¿…é¡»ç­‰å¾…æ’å…¥æ“ä½œã€‚å› æ­¤ï¼Œ</span><code>SynchronousQueue</code><span>é€šå¸¸ç”¨äºçº¿ç¨‹ä¹‹é—´çš„ç›´æ¥ä¼ é€’æ•°æ®ã€‚</span></p></li><li><p><code>DelayQueue</code><span>ï¼šå»¶è¿Ÿé˜Ÿåˆ—ï¼Œå…¶ä¸­çš„å…ƒç´ åªæœ‰åˆ°äº†å…¶æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´ï¼Œæ‰èƒ½å¤Ÿä»é˜Ÿåˆ—ä¸­å‡ºé˜Ÿã€‚</span></p></li><li><p><span>â€¦</span></p></li></ol><h1 id='6-mapæ¥å£'><span>6 Mapæ¥å£</span></h1><h2 id='61-hashmap'><span>6.1 HashMap</span></h2><p><span>ä»¥ä¸‹æºç åˆ†æä»¥ JDK 1.8 ä¸ºä¸»ã€‚</span></p><p><span>åœ¨å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œç”±äºä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥åœ¨æ‰©å®¹æ—¶ä¼šäº§ç”Ÿæ­»é“¾çš„é—®é¢˜ã€‚</span></p><h3 id='1-å­˜å‚¨ç»“æ„'><span>1. </span><strong><span>å­˜å‚¨ç»“æ„</span></strong></h3><ul><li><p><strong><span>JDK1.8ä¹‹å‰ï¼šæ•°ç»„ + é“¾è¡¨ï¼›</span></strong></p><ul><li><p><span>JDK1.8 ä¹‹å‰ </span><code>HashMap</code><span> åº•å±‚æ˜¯ </span><strong><span>æ•°ç»„å’Œé“¾è¡¨</span></strong><span> ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ä¹Ÿå°±æ˜¯ </span><strong><span>é“¾è¡¨æ•£åˆ—</span></strong><span>ã€‚HashMap é€šè¿‡ key çš„ </span><code>hashcode</code><span> ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†è¿‡åå¾—åˆ° hash å€¼ï¼Œç„¶åé€šè¿‡ </span><code>(n - 1) &amp; hash</code><span> åˆ¤æ–­å½“å‰å…ƒç´ å­˜æ”¾çš„ä½ç½®ï¼ˆè¿™é‡Œçš„ n æŒ‡çš„æ˜¯æ•°ç»„çš„é•¿åº¦ï¼‰ï¼Œå¦‚æœå½“å‰ä½ç½®å­˜åœ¨å…ƒç´ çš„è¯ï¼Œå°±åˆ¤æ–­è¯¥å…ƒç´ ä¸è¦å­˜å…¥çš„å…ƒç´ çš„ hash å€¼ä»¥åŠ key æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒçš„è¯ï¼Œç›´æ¥è¦†ç›–ï¼Œä¸ç›¸åŒå°±é€šè¿‡æ‹‰é“¾æ³•è§£å†³å†²çªã€‚</span></p></li></ul></li><li><p><strong><span>JDK1.8ä¹‹åï¼šæ•°ç»„+ é“¾è¡¨/çº¢é»‘æ ‘ã€‚</span></strong></p></li></ul><p><img src="./images/HashMapå­˜å‚¨ç»“æ„.png" referrerpolicy="no-referrer" alt="HashMapå­˜å‚¨ç»“æ„.png"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">transient</span> <span class="cm-variable">Entry</span>[] <span class="cm-variable">table</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-keyword">class</span> <span class="cm-def">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Map</span>.<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">K</span> <span class="cm-variable">key</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">V</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">next</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">hash</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Entry</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">h</span>, <span class="cm-variable">K</span> <span class="cm-variable">k</span>, <span class="cm-variable">V</span> <span class="cm-variable">v</span>, <span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">n</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-variable">v</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">next</span> <span class="cm-operator">=</span> <span class="cm-variable">n</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">key</span> <span class="cm-operator">=</span> <span class="cm-variable">k</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">hash</span> <span class="cm-operator">=</span> <span class="cm-variable">h</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">final</span> <span class="cm-variable">K</span> <span class="cm-variable">getKey</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">key</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">final</span> <span class="cm-variable">V</span> <span class="cm-variable">getValue</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">final</span> <span class="cm-variable">V</span> <span class="cm-variable">setValue</span>(<span class="cm-variable">V</span> <span class="cm-variable">newValue</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">V</span> <span class="cm-variable">oldValue</span> <span class="cm-operator">=</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-variable">newValue</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">oldValue</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">boolean</span> <span class="cm-variable">equals</span>(<span class="cm-variable-3">Object</span> <span class="cm-variable">o</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span>(<span class="cm-variable">o</span> <span class="cm-keyword">instanceof</span> <span class="cm-variable">Map</span>.<span class="cm-variable">Entry</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span>.<span class="cm-variable">Entry</span> <span class="cm-variable">e</span> <span class="cm-operator">=</span> (<span class="cm-variable">Map</span>.<span class="cm-variable">Entry</span>)<span class="cm-variable">o</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">Object</span> <span class="cm-variable">k1</span> <span class="cm-operator">=</span> <span class="cm-variable">getKey</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">Object</span> <span class="cm-variable">k2</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>.<span class="cm-variable">getKey</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">k1</span> <span class="cm-operator">==</span> <span class="cm-variable">k2</span> <span class="cm-operator">||</span> (<span class="cm-variable">k1</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">k1</span>.<span class="cm-variable">equals</span>(<span class="cm-variable">k2</span>))) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">Object</span> <span class="cm-variable">v1</span> <span class="cm-operator">=</span> <span class="cm-variable">getValue</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">Object</span> <span class="cm-variable">v2</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>.<span class="cm-variable">getValue</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">v1</span> <span class="cm-operator">==</span> <span class="cm-variable">v2</span> <span class="cm-operator">||</span> (<span class="cm-variable">v1</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">v1</span>.<span class="cm-variable">equals</span>(<span class="cm-variable">v2</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-variable">hashCode</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Objects</span>.<span class="cm-variable">hashCode</span>(<span class="cm-variable">getKey</span>()) <span class="cm-variable">^</span> <span class="cm-variable">Objects</span>.<span class="cm-variable">hashCode</span>(<span class="cm-variable">getValue</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">String</span> <span class="cm-variable">toString</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">getKey</span>() <span class="cm-operator">+</span> <span class="cm-string">"="</span> <span class="cm-operator">+</span> <span class="cm-variable">getValue</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1150px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1150px;"></div></div></div></pre><h3 id='2æºç åˆ†æ'><span>2.æºç åˆ†æ</span></h3><p><span> </span><strong><span>putæ–¹æ³•</span></strong></p><ol start='' ><li><p><strong><span>è®¡ç®— key çš„ hash å€¼ã€‚</span></strong></p><p><span>è®¡ç®—æ–¹å¼æ˜¯ </span><code>(key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</code></p></li><li><p><strong><span>æ£€æŸ¥å½“å‰æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºéœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–å®¹é‡æ˜¯ 16 ï¼Œè´Ÿè½½å› å­é»˜è®¤ 0.75ã€‚</span></strong></p></li><li><p><strong><span>è®¡ç®— key åœ¨æ•°ç»„ä¸­çš„åæ ‡ã€‚</span></strong></p><p><span>è®¡ç®—æ–¹å¼ï¼š</span><code>(å®¹é‡ - 1) &amp; hash</code><span>.</span></p><p><span>å› ä¸ºå®¹é‡æ€»æ˜¯2çš„æ¬¡æ–¹ï¼Œæ‰€ä»¥-1çš„å€¼çš„äºŒè¿›åˆ¶æ€»æ˜¯å…¨1ã€‚æ–¹ä¾¿ä¸ hash å€¼è¿›è¡Œä¸è¿ç®—ã€‚</span></p></li><li><p><strong><span>å¦‚æœè®¡ç®—å‡ºçš„åæ ‡å…ƒç´ ä¸ºç©ºï¼Œåˆ›å»ºèŠ‚ç‚¹åŠ å…¥ï¼Œput ç»“æŸã€‚</span></strong></p></li><li><ol start='' ><li><p><strong><span>å¦‚æœå½“å‰é”®å€¼å¯¹çš„æ•°é‡å¤§äºé˜ˆå€¼ï¼ˆè´Ÿè½½å› å­*å®¹é‡)ï¼Œè¿›è¡Œæ‰©å®¹ã€‚</span></strong></p></li></ol></li><li><p><strong><span>å¦‚æœè®¡ç®—å‡ºçš„åæ ‡å…ƒç´ æœ‰å€¼ã€‚éå†é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘æ’å…¥ã€‚</span></strong></p></li><li><ol start='' ><li><p><span>å¦‚æœ next èŠ‚ç‚¹ä¸ºç©ºï¼ŒæŠŠè¦åŠ å…¥çš„å€¼å’Œ key åŠ å…¥ next èŠ‚ç‚¹ã€‚</span></p></li><li><p><span>å¦‚æœ next èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå¾ªç¯æŸ¥çœ‹ next èŠ‚ç‚¹ã€‚</span></p><p><span>å¦‚æœå‘ç°æœ‰ next èŠ‚ç‚¹çš„ key å’Œè¦åŠ å…¥çš„ key ä¸€æ ·ï¼Œå¯¹åº”çš„å€¼æ›¿æ¢ä¸ºæ–°å€¼ã€‚</span></p></li><li><p><span>å¦‚æœå¾ªç¯ next èŠ‚ç‚¹æŸ¥æ‰¾</span><strong><span>è¶…è¿‡8å±‚</span></strong><span>è¿˜ä¸ä¸ºç©ºï¼ŒæŠŠè¿™ä¸ªä½ç½®å…ƒç´ è½¬æ¢ä¸º</span><strong><span>çº¢é»‘æ ‘</span></strong><span>ã€‚</span></p></li><li><p><span>å¦‚æœåæ ‡ä¸Šçš„å…ƒç´ å€¼å’Œè¦åŠ å…¥çš„å€¼ key å®Œå…¨ä¸€æ ·ï¼Œè¦†ç›–åŸæœ‰å€¼ã€‚</span></p></li><li><p><span>å¦‚æœåæ ‡ä¸Šçš„å…ƒç´ æ˜¯</span><strong><span>çº¢é»‘æ ‘</span></strong><span>ï¼ŒæŠŠè¦åŠ å…¥çš„å€¼å’Œ key åŠ å…¥åˆ°çº¢é»‘æ ‘ã€‚</span></p></li><li><p><span>å¦‚æœåæ ‡ä¸Šçš„å…ƒç´ å’Œè¦åŠ å…¥çš„å…ƒç´ ä¸åŒï¼ˆ</span><strong><span>å°¾æ’æ³•</span></strong><span>å¢åŠ ï¼‰ã€‚</span></p></li></ol><blockquote><p><span>jdk1.8é‡‡ç”¨å°¾æ’æ³•ï¼Œjdk1.7é‡‡ç”¨å¤´æ’æ³•ã€‚</span></p></blockquote></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">map.put("K1", "V1");</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">map.put("K2", "V2");</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">map.put("K3", "V3");</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable">V</span> <span class="cm-def">put</span>(<span class="cm-variable">K</span> <span class="cm-variable">key</span>, <span class="cm-variable">V</span> <span class="cm-variable">value</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">putVal</span>(<span class="cm-variable">hash</span>(<span class="cm-variable">key</span>), <span class="cm-variable">key</span>, <span class="cm-variable">value</span>, <span class="cm-atom">false</span>, <span class="cm-atom">true</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// è®¡ç®—å“ˆå¸Œå€¼ ä¸ï¼ˆ&amp;ï¼‰ã€éï¼ˆ~ï¼‰ã€æˆ–ï¼ˆ|ï¼‰ã€å¼‚æˆ–ï¼ˆ^ï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-def">hash</span>(<span class="cm-variable-3">Object</span> <span class="cm-variable">key</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">h</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> (<span class="cm-variable">key</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) <span class="cm-operator">?</span> <span class="cm-number">0</span> : (<span class="cm-variable">h</span> <span class="cm-operator">=</span> <span class="cm-variable">key</span>.<span class="cm-variable">hashCode</span>()) <span class="cm-variable">^</span> (<span class="cm-variable">h</span> <span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-number">16</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">V</span> <span class="cm-def">putVal</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">hash</span>, <span class="cm-variable">K</span> <span class="cm-variable">key</span>, <span class="cm-variable">V</span> <span class="cm-variable">value</span>, <span class="cm-variable-3">boolean</span> <span class="cm-variable">onlyIfAbsent</span>, <span class="cm-variable-3">boolean</span> <span class="cm-variable">evict</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span>[] <span class="cm-variable">tab</span>; <span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">p</span>; <span class="cm-variable-3">int</span> <span class="cm-variable">n</span>, <span class="cm-variable">i</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œè¿›è¡Œ resize() åˆå§‹åŒ–</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> ((<span class="cm-variable">tab</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>) <span class="cm-operator">==</span> <span class="cm-atom">null</span> <span class="cm-operator">||</span> (<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-variable">tab</span>.<span class="cm-variable">length</span>) <span class="cm-operator">==</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">=</span> (<span class="cm-variable">tab</span> <span class="cm-operator">=</span> <span class="cm-variable">resize</span>()).<span class="cm-variable">length</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœè®¡ç®—çš„ä½ç½®ä¸ŠNodeä¸å­˜åœ¨ï¼Œç›´æ¥åˆ›å»ºèŠ‚ç‚¹æ’å…¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> ((<span class="cm-variable">p</span> <span class="cm-operator">=</span> <span class="cm-variable">tab</span>[<span class="cm-variable">i</span> <span class="cm-operator">=</span> (<span class="cm-variable">n</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">&amp;</span> <span class="cm-variable">hash</span>]) <span class="cm-operator">==</span> <span class="cm-atom">null</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tab</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">newNode</span>(<span class="cm-variable">hash</span>, <span class="cm-variable">key</span>, <span class="cm-variable">value</span>, <span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœè®¡ç®—çš„ä½ç½®ä¸ŠNode å­˜åœ¨ï¼Œé“¾è¡¨å¤„ç†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">e</span>; <span class="cm-variable">K</span> <span class="cm-variable">k</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœ hash å€¼ï¼Œk å€¼å®Œå…¨ç›¸åŒï¼Œç›´æ¥è¦†ç›–</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">p</span>.<span class="cm-variable">hash</span> <span class="cm-operator">==</span> <span class="cm-variable">hash</span> <span class="cm-operator">&amp;&amp;</span>((<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">key</span>) <span class="cm-operator">==</span> <span class="cm-variable">key</span> <span class="cm-operator">||</span> (<span class="cm-variable">key</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">key</span>.<span class="cm-variable">equals</span>(<span class="cm-variable">k</span>))))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœ index ä½ç½®å…ƒç´ å·²ç»å­˜åœ¨ï¼Œä¸”æ˜¯çº¢é»‘æ ‘</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">p</span> <span class="cm-keyword">instanceof</span> <span class="cm-variable">TreeNode</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">e</span> <span class="cm-operator">=</span> ((<span class="cm-variable">TreeNode</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span>)<span class="cm-variable">p</span>).<span class="cm-variable">putTreeVal</span>(<span class="cm-keyword">this</span>, <span class="cm-variable">tab</span>, <span class="cm-variable">hash</span>, <span class="cm-variable">key</span>, <span class="cm-variable">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœè¿™æ¬¡è¦æ”¾å…¥çš„å€¼ä¸å­˜åœ¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">binCount</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; ; <span class="cm-operator">++</span><span class="cm-variable">binCount</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å°¾æ’æ³•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> ((<span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">next</span>) <span class="cm-operator">==</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// æ‰¾åˆ°èŠ‚ç‚¹é“¾è¡¨ä¸­nextä¸ºç©ºçš„èŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°çš„èŠ‚ç‚¹æ’å…¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">p</span>.<span class="cm-variable">next</span> <span class="cm-operator">=</span> <span class="cm-variable">newNode</span>(<span class="cm-variable">hash</span>, <span class="cm-variable">key</span>, <span class="cm-variable">value</span>, <span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœèŠ‚ç‚¹é“¾è¡¨ä¸­æ•°é‡è¶…è¿‡TREEIFY_THRESHOLDï¼ˆ8ï¼‰ä¸ªï¼Œè½¬åŒ–ä¸ºçº¢é»‘æ ‘</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">binCount</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">TREEIFY_THRESHOLD</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-comment">// -1 for 1st</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">treeifyBin</span>(<span class="cm-variable">tab</span>, <span class="cm-variable">hash</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœèŠ‚ç‚¹é“¾è¡¨ä¸­æœ‰å‘ç°å·²æœ‰ç›¸åŒkey</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">e</span>.<span class="cm-variable">hash</span> <span class="cm-operator">==</span> <span class="cm-variable">hash</span> <span class="cm-operator">&amp;&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ((<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>.<span class="cm-variable">key</span>) <span class="cm-operator">==</span> <span class="cm-variable">key</span> <span class="cm-operator">||</span> (<span class="cm-variable">key</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">key</span>.<span class="cm-variable">equals</span>(<span class="cm-variable">k</span>))))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">p</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœèŠ‚ç‚¹ e æœ‰å€¼ï¼Œæ”¾å…¥æ•°ç»„ table[]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">e</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) { <span class="cm-comment">// existing mapping for key</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">V</span> <span class="cm-variable">oldValue</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>.<span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">onlyIfAbsent</span> <span class="cm-operator">||</span> <span class="cm-variable">oldValue</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">e</span>.<span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">afterNodeAccess</span>(<span class="cm-variable">e</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">oldValue</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">++</span><span class="cm-variable">modCount</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// å½“å‰å¤§å°å¤§äºä¸´ç•Œå¤§å°ï¼Œæ‰©å®¹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">++</span><span class="cm-variable">size</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">threshold</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">resize</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">afterNodeInsertion</span>(<span class="cm-variable">evict</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1426px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1426px;"></div></div></div></pre><p><strong><span>HashMap å…è®¸æ’å…¥é”®ä¸º null çš„é”®å€¼å¯¹ã€‚ä½†æ˜¯å› ä¸ºæ— æ³•è°ƒç”¨ null çš„ hashCode() æ–¹æ³•ï¼Œä¹Ÿå°±æ— æ³•ç¡®å®šè¯¥é”®å€¼å¯¹çš„æ¡¶ä¸‹æ ‡ï¼Œåªèƒ½é€šè¿‡å¼ºåˆ¶æŒ‡å®šä¸€ä¸ªæ¡¶ä¸‹æ ‡æ¥å­˜æ”¾ã€‚HashMap ä½¿ç”¨ç¬¬ 0 ä¸ªæ¡¶å­˜æ”¾é”®ä¸º null çš„é”®å€¼å¯¹ã€‚</span></strong></p><p><strong><span>get æ–¹æ³•æµç¨‹æ€»ç»“ã€‚</span></strong></p><ol start='' ><li><p><strong><span>è®¡ç®— key çš„ hash å€¼ã€‚</span></strong></p></li><li><p><strong><span>å¦‚æœå­˜å‚¨æ•°ç»„ä¸ä¸ºç©ºï¼Œä¸”è®¡ç®—å¾—åˆ°çš„ä½ç½®ä¸Šçš„å…ƒç´ ä¸ä¸ºç©ºã€‚ç»§ç»­ï¼Œå¦åˆ™ï¼Œè¿”å› Nullã€‚</span></strong></p></li><li><p><strong><span>å¦‚æœè·å–åˆ°çš„å…ƒç´ çš„ key å€¼ç›¸ç­‰ï¼Œè¯´æ˜æŸ¥æ‰¾åˆ°äº†ï¼Œè¿”å›å…ƒç´ ã€‚</span></strong></p></li><li><p><strong><span>å¦‚æœè·å–åˆ°çš„å…ƒç´ çš„ key å€¼ä¸ç›¸ç­‰ï¼ŒæŸ¥æ‰¾ next èŠ‚ç‚¹çš„å…ƒç´ ã€‚</span></strong></p></li><li><ol start='' ><li><p><strong><span>å¦‚æœå…ƒç´ æ˜¯çº¢é»‘æ ‘ï¼Œåœ¨çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾ã€‚</span></strong></p></li><li><p><strong><span>ä¸æ˜¯çº¢é»‘æ ‘ï¼Œéå† next èŠ‚ç‚¹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°åˆ™è¿”å›ã€‚</span></strong></p></li></ol></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable">V</span> <span class="cm-def">get</span>(<span class="cm-variable-3">Object</span> <span class="cm-variable">key</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">e</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> (<span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">getNode</span>(<span class="cm-variable">hash</span>(<span class="cm-variable">key</span>), <span class="cm-variable">key</span>)) <span class="cm-operator">==</span> <span class="cm-atom">null</span> <span class="cm-operator">?</span> <span class="cm-atom">null</span> : <span class="cm-variable">e</span>.<span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-def">getNode</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">hash</span>, <span class="cm-variable-3">Object</span> <span class="cm-variable">key</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span>[] <span class="cm-variable">tab</span>; <span class="cm-variable">Node</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">first</span>, <span class="cm-variable">e</span>; <span class="cm-variable-3">int</span> <span class="cm-variable">n</span>; <span class="cm-variable">K</span> <span class="cm-variable">k</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// åªæœ‰åœ¨å­˜å‚¨æ•°ç»„å·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹è¿›å…¥è¿™ä¸ª if</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> ((<span class="cm-variable">tab</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>) <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span> (<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-variable">tab</span>.<span class="cm-variable">length</span>) <span class="cm-operator">&gt;</span> <span class="cm-number">0</span> <span class="cm-operator">&amp;&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  (<span class="cm-variable">first</span> <span class="cm-operator">=</span> <span class="cm-variable">tab</span>[(<span class="cm-variable">n</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">&amp;</span> <span class="cm-variable">hash</span>]) <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// first æ˜¯è·å–çš„åæ ‡ä¸Šå…ƒç´ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">first</span>.<span class="cm-variable">hash</span> <span class="cm-operator">==</span> <span class="cm-variable">hash</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-comment">// always check first node</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ((<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-variable">first</span>.<span class="cm-variable">key</span>) <span class="cm-operator">==</span> <span class="cm-variable">key</span> <span class="cm-operator">||</span> (<span class="cm-variable">key</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">key</span>.<span class="cm-variable">equals</span>(<span class="cm-variable">k</span>))))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// key ç›¸åŒï¼Œè¯´æ˜firstæ˜¯æƒ³è¦çš„å…ƒç´ ï¼Œè¿”å›</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">first</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> ((<span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">first</span>.<span class="cm-variable">next</span>) <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">first</span> <span class="cm-keyword">instanceof</span> <span class="cm-variable">TreeNode</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œä»çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾ç»“æœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> ((<span class="cm-variable">TreeNode</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span>)<span class="cm-variable">first</span>).<span class="cm-variable">getTreeNode</span>(<span class="cm-variable">hash</span>, <span class="cm-variable">key</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">do</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// å¾ªç¯éå†æŸ¥æ‰¾</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">e</span>.<span class="cm-variable">hash</span> <span class="cm-operator">==</span> <span class="cm-variable">hash</span> <span class="cm-operator">&amp;&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ((<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>.<span class="cm-variable">key</span>) <span class="cm-operator">==</span> <span class="cm-variable">key</span> <span class="cm-operator">||</span> (<span class="cm-variable">key</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">key</span>.<span class="cm-variable">equals</span>(<span class="cm-variable">k</span>))))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">e</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">while</span> ((<span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>.<span class="cm-variable">next</span>) <span class="cm-operator">!=</span> <span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 644px;"></div><div class="CodeMirror-gutters" style="display: none; height: 644px;"></div></div></div></pre><p><strong><span>resize()æ–¹æ³•</span></strong></p><ol start='' ><li><p><strong><span>HashMapä¸ºä»€ä¹ˆè¦æ‰©å®¹?</span></strong></p><p><span>ä¸ºäº†è§£å†³å†²çª, æˆ‘ä»¬å°±éœ€è¦å¯¹tableè¿›è¡Œæ‰©å®¹, æ‰€ä»¥HashMapçš„æ‰©å®¹å°±æ˜¯åŠ é•¿tableçš„é•¿åº¦, æ¥å‡å°‘hashå†²çªçš„æ¦‚ç‡.</span></p></li><li><p><strong><span>HashMapä½•æ—¶æ‰©å®¹ï¼Ÿ</span></strong></p></li></ol><ul><li><p><span>HashMapå®è¡Œäº†æ‡’åŠ è½½, </span><strong><span>æ–°å»ºHashMapæ—¶ä¸ä¼šå¯¹tableè¿›è¡Œèµ‹å€¼, è€Œæ˜¯åˆ°ç¬¬ä¸€æ¬¡æ’å…¥æ—¶, è¿›è¡Œresizeæ—¶æ„å»ºtable;</span></strong></p></li><li><p><strong><span>å½“HashMap.size å¤§äº thresholdæ—¶, ä¼šè¿›è¡Œresize;</span></strong><span>å½“ç¬¬ä¸€æ¬¡æ„å»ºæ—¶, å¦‚æœæ²¡æœ‰æŒ‡å®šHashMap.tableçš„åˆå§‹é•¿åº¦, å°±ç”¨é»˜è®¤å€¼16, å¦åˆ™å°±æ˜¯æŒ‡å®šçš„å€¼; ç„¶åä¸ç®¡æ˜¯ç¬¬ä¸€æ¬¡æ„å»ºè¿˜æ˜¯åç»­æ‰©å®¹, threshold = table.length * loadFactor;</span></p></li></ul><ol start='' ><li><p><strong><span>æ‰©å®¹çš„è¿‡ç¨‹ï¼Ÿ</span></strong></p></li></ol><ul><li><p><strong><span>å¦‚æœtable == null, åˆ™ä¸ºHashMapçš„åˆå§‹åŒ–, ç”Ÿæˆç©ºtableè¿”å›å³å¯;</span></strong></p></li><li><p><strong><span>å¦‚æœtableä¸ä¸ºç©º, éœ€è¦é‡æ–°è®¡ç®—tableçš„é•¿åº¦, newLength = oldLength *2  </span></strong><span>ï¼›æ³¨, å¦‚æœåŸoldLengthå·²ç»åˆ°äº†ä¸Šé™, åˆ™newLength = oldLength);</span></p><ul><li><p><span>å°†tableæ‰©ä¸ºæ–°çš„é•¿åº¦ã€‚</span></p></li><li><p><span>oldTable çš„æ‰€æœ‰é”®å€¼å¯¹é‡æ–°æ’å…¥ newTable ä¸­ã€‚ç”± </span><code>if ((e.hash &amp; oldCap) == 0)</code><span> ç¡®å®šé”®å€¼å¯¹çš„ä½ç½®ã€‚</span></p><ul><li><p><span>e.hash &amp; oldCap = 0 è®¡ç®—å¾—åˆ°ä½ç½®è¿˜æ˜¯æ‰©å®¹å‰ä½ç½®</span></p></li><li><p><span>e.hash &amp; oldCap != 0 è®¡ç®—å¾—åˆ°ä½ç½®æ˜¯æ‰©å®¹å‰ä½ç½® + æ‰©å®¹å‰å®¹é‡</span><code>oldCap</code></p></li></ul></li></ul></li></ul><p><span>å’Œæ‰©å®¹ç›¸å…³çš„å‚æ•°ä¸»è¦æœ‰ï¼šcapacityã€sizeã€threshold å’Œ load_factorã€‚</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>å‚æ•°</span></th><th style='text-align:left;' ><span>å«ä¹‰</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>capacity</span></td><td style='text-align:left;' ><span>table çš„å®¹é‡å¤§å°ï¼Œé»˜è®¤ä¸º 16ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ capacity å¿…é¡»ä¿è¯ä¸º 2 çš„ n æ¬¡æ–¹ã€‚</span></td></tr><tr><td style='text-align:center;' ><span>size</span></td><td style='text-align:left;' ><span>é”®å€¼å¯¹æ•°é‡ã€‚</span></td></tr><tr><td style='text-align:center;' ><span>threshold</span></td><td style='text-align:left;' ><span>size çš„ä¸´ç•Œå€¼ï¼Œå½“ size å¤§äºç­‰äº threshold å°±å¿…é¡»è¿›è¡Œæ‰©å®¹æ“ä½œã€‚</span></td></tr><tr><td style='text-align:center;' ><span>loadFactor</span></td><td style='text-align:left;' ><span>è£…è½½å› å­ï¼Œtable èƒ½å¤Ÿä½¿ç”¨çš„æ¯”ä¾‹ï¼Œthreshold = (int)(capacity* loadFactor)ã€‚</span></td></tr></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-variable">DEFAULT_INITIAL_CAPACITY</span> <span class="cm-operator">=</span> <span class="cm-number">16</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-variable">MAXIMUM_CAPACITY</span> <span class="cm-operator">=</span> <span class="cm-number">1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">30</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-keyword">float</span> <span class="cm-variable">DEFAULT_LOAD_FACTOR</span> <span class="cm-operator">=</span> <span class="cm-number">0.75f</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">transient</span> <span class="cm-variable">Entry</span>[] <span class="cm-variable">table</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">transient</span> <span class="cm-variable-3">int</span> <span class="cm-variable">size</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">threshold</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-keyword">float</span> <span class="cm-variable">loadFactor</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">transient</span> <span class="cm-variable-3">int</span> <span class="cm-variable">modCount</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><p><strong><span>ä»ä¸‹é¢çš„æ·»åŠ å…ƒç´ ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“éœ€è¦æ‰©å®¹æ—¶ï¼Œä»¤ capacity ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">addEntry</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">hash</span>, <span class="cm-variable">K</span> <span class="cm-variable">key</span>, <span class="cm-variable">V</span> <span class="cm-variable">value</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">bucketIndex</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>[<span class="cm-variable">bucketIndex</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">table</span>[<span class="cm-variable">bucketIndex</span>] <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Entry</span><span class="cm-operator">&lt;&gt;</span>(<span class="cm-variable">hash</span>, <span class="cm-variable">key</span>, <span class="cm-variable">value</span>, <span class="cm-variable">e</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">size</span><span class="cm-operator">++</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">threshold</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">resize</span>(<span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable">table</span>.<span class="cm-variable">length</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p><strong><span>æ‰©å®¹ä½¿ç”¨ resize() å®ç°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰©å®¹æ“ä½œåŒæ ·éœ€è¦æŠŠ oldTable çš„æ‰€æœ‰é”®å€¼å¯¹é‡æ–°æ’å…¥ newTable ä¸­ï¼Œå› æ­¤è¿™ä¸€æ­¥æ˜¯å¾ˆè´¹æ—¶çš„ã€‚</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">resize</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">newCapacity</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Entry</span>[] <span class="cm-variable">oldTable</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">oldCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">oldTable</span>.<span class="cm-variable">length</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">oldCapacity</span> <span class="cm-operator">==</span> <span class="cm-variable">MAXIMUM_CAPACITY</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">threshold</span> <span class="cm-operator">=</span> <span class="cm-variable-3">Integer</span>.<span class="cm-variable">MAX_VALUE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Entry</span>[] <span class="cm-variable">newTable</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Entry</span>[<span class="cm-variable">newCapacity</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">transfer</span>(<span class="cm-variable">newTable</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">table</span> <span class="cm-operator">=</span> <span class="cm-variable">newTable</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">threshold</span> <span class="cm-operator">=</span> (<span class="cm-variable-3">int</span>)(<span class="cm-variable">newCapacity</span> <span class="cm-operator">*</span> <span class="cm-variable">loadFactor</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">transfer</span>(<span class="cm-variable">Entry</span>[] <span class="cm-variable">newTable</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Entry</span>[] <span class="cm-variable">src</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">newCapacity</span> <span class="cm-operator">=</span> <span class="cm-variable">newTable</span>.<span class="cm-variable">length</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">j</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">j</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">src</span>.<span class="cm-variable">length</span>; <span class="cm-variable">j</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">src</span>[<span class="cm-variable">j</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">e</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">src</span>[<span class="cm-variable">j</span>] <span class="cm-operator">=</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">do</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable">K</span>,<span class="cm-variable">V</span><span class="cm-operator">&gt;</span> <span class="cm-variable">next</span> <span class="cm-operator">=</span> <span class="cm-variable">e</span>.<span class="cm-variable">next</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-variable">indexFor</span>(<span class="cm-variable">e</span>.<span class="cm-variable">hash</span>, <span class="cm-variable">newCapacity</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">e</span>.<span class="cm-variable">next</span> <span class="cm-operator">=</span> <span class="cm-variable">newTable</span>[<span class="cm-variable">i</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newTable</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">e</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">e</span> <span class="cm-operator">=</span> <span class="cm-variable">next</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">while</span> (<span class="cm-variable">e</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 690px;"></div><div class="CodeMirror-gutters" style="display: none; height: 690px;"></div></div></div></pre><p><strong><span>è®¡ç®—æ•°ç»„å®¹é‡</span></strong></p><p><span>HashMap æ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ å…¥çš„å®¹é‡ä¸æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨åœ°å°†ä¼ å…¥çš„å®¹é‡è½¬æ¢ä¸º 2 çš„ n æ¬¡æ–¹ã€‚</span></p><p><span>å…ˆè€ƒè™‘å¦‚ä½•æ±‚ä¸€ä¸ªæ•°çš„æ©ç ï¼Œå¯¹äº 10010000ï¼Œå®ƒçš„æ©ç ä¸º 11111111ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¾—åˆ°ï¼š</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mask |= mask &gt;&gt; 1 &nbsp;  11011000</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mask |= mask &gt;&gt; 2 &nbsp;  11111110</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mask |= mask &gt;&gt; 4 &nbsp;  11111111</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>mask+1 æ˜¯å¤§äºåŸå§‹æ•°å­—çš„æœ€å°çš„ 2 çš„ n æ¬¡æ–¹ã€‚</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">num &nbsp; &nbsp; 10010000</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mask+1 100000000</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>ä»¥ä¸‹æ˜¯ HashMap ä¸­è®¡ç®—æ•°ç»„å®¹é‡çš„ä»£ç ï¼š</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-def">tableSizeFor</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">cap</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-variable">cap</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">|=</span> <span class="cm-variable">n</span> <span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">|=</span> <span class="cm-variable">n</span> <span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-number">2</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">|=</span> <span class="cm-variable">n</span> <span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-number">4</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">|=</span> <span class="cm-variable">n</span> <span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-number">8</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">|=</span> <span class="cm-variable">n</span> <span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-number">16</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> (<span class="cm-variable">n</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0</span>) <span class="cm-operator">?</span> <span class="cm-number">1</span> : (<span class="cm-variable">n</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">MAXIMUM_CAPACITY</span>) <span class="cm-operator">?</span> <span class="cm-variable">MAXIMUM_CAPACITY</span> : <span class="cm-variable">n</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><h3 id='hashmapçº¿ç¨‹ä¸å®‰å…¨'><span>HashMapçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ</span></h3><p><strong><span>1. putçš„æ—¶å€™å¯¼è‡´çš„å¤šçº¿ç¨‹æ•°æ®ä¸ä¸€è‡´ã€‚</span></strong>
<span> è¿™ä¸ªé—®é¢˜æ¯”è¾ƒå¥½æƒ³è±¡ï¼Œæ¯”å¦‚æœ‰ä¸¤ä¸ªçº¿ç¨‹Aå’ŒBï¼Œé¦–å…ˆAå¸Œæœ›æ’å…¥ä¸€ä¸ªkey-valueå¯¹åˆ°HashMapä¸­ï¼Œé¦–å…ˆè®¡ç®—è®°å½•æ‰€è¦è½åˆ°çš„æ¡¶çš„ç´¢å¼•åæ ‡ï¼Œç„¶åè·å–åˆ°è¯¥æ¡¶é‡Œé¢çš„é“¾è¡¨å¤´ç»“ç‚¹ï¼Œæ­¤æ—¶çº¿ç¨‹Açš„æ—¶é—´ç‰‡ç”¨å®Œäº†ï¼Œè€Œæ­¤æ—¶çº¿ç¨‹Bè¢«è°ƒåº¦å¾—ä»¥æ‰§è¡Œï¼Œå’Œçº¿ç¨‹Aä¸€æ ·æ‰§è¡Œï¼Œåªä¸è¿‡çº¿ç¨‹BæˆåŠŸå°†è®°å½•æ’åˆ°äº†æ¡¶é‡Œé¢ï¼Œå‡è®¾çº¿ç¨‹Aæ’å…¥çš„è®°å½•è®¡ç®—å‡ºæ¥çš„æ¡¶ç´¢å¼•å’Œçº¿ç¨‹Bè¦æ’å…¥çš„è®°å½•è®¡ç®—å‡ºæ¥çš„æ¡¶ç´¢å¼•æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹BæˆåŠŸæ’å…¥ä¹‹åï¼Œçº¿ç¨‹Aå†æ¬¡è¢«è°ƒåº¦è¿è¡Œæ—¶ï¼Œå®ƒä¾ç„¶æŒæœ‰è¿‡æœŸçš„é“¾è¡¨å¤´ä½†æ˜¯å®ƒå¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œä»¥è‡³äºå®ƒè®¤ä¸ºå®ƒåº”è¯¥è¿™æ ·åšï¼Œå¦‚æ­¤ä¸€æ¥å°±è¦†ç›–äº†çº¿ç¨‹Bæ’å…¥çš„è®°å½•ï¼Œè¿™æ ·çº¿ç¨‹Bæ’å…¥çš„è®°å½•å°±å‡­ç©ºæ¶ˆå¤±äº†ï¼Œé€ æˆäº†æ•°æ®ä¸ä¸€è‡´çš„è¡Œä¸ºã€‚</span></p><p><strong><span>2. resizeçš„æ—¶å€™å¯¼è‡´çš„å¤šçº¿ç¨‹æ•°æ®ä¸ä¸€è‡´ã€‚</span></strong></p><p><img src="./images/å¤šçº¿ç¨‹hashmapçš„resize.png" referrerpolicy="no-referrer" alt="å¤šçº¿ç¨‹hashmapçš„resize.png"></p><p><span>æˆ‘ä»¬å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶éœ€è¦æ‰§è¡Œresizeæ“ä½œï¼Œæˆ‘ä»¬åŸæ¥çš„æ¡¶æ•°é‡ä¸º2ï¼Œè®°å½•æ•°ä¸º3ï¼Œéœ€è¦resizeæ¡¶åˆ°4ï¼ŒåŸæ¥çš„è®°å½•åˆ†åˆ«ä¸ºï¼š[3,A],[7,B],[5,C]ï¼Œåœ¨åŸæ¥çš„mapé‡Œé¢ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸‰ä¸ªentryéƒ½è½åˆ°äº†ç¬¬äºŒä¸ªæ¡¶é‡Œé¢ã€‚</span>
<span> å‡è®¾çº¿ç¨‹thread1æ‰§è¡Œåˆ°äº†transferæ–¹æ³•çš„Entry next = e.nextè¿™ä¸€å¥ï¼Œç„¶åæ—¶é—´ç‰‡ç”¨å®Œäº†ï¼Œæ­¤æ—¶çš„e = [3,A], next = [7,B]ã€‚çº¿ç¨‹thread2è¢«è°ƒåº¦æ‰§è¡Œå¹¶ä¸”é¡ºåˆ©å®Œæˆäº†resizeæ“ä½œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶çš„[7,B]çš„nextä¸º[3,A]ã€‚æ­¤æ—¶çº¿ç¨‹thread1é‡æ–°è¢«è°ƒåº¦è¿è¡Œï¼Œæ­¤æ—¶çš„thread1æŒæœ‰çš„å¼•ç”¨æ˜¯å·²ç»è¢«thread2 resizeä¹‹åçš„ç»“æœã€‚çº¿ç¨‹thread1é¦–å…ˆå°†[3,A]è¿ç§»åˆ°æ–°çš„æ•°ç»„ä¸Šï¼Œç„¶åå†å¤„ç†[7,B]ï¼Œè€Œ[7,B]è¢«é“¾æ¥åˆ°äº†[3,A]çš„åé¢ï¼Œå¤„ç†å®Œ[7,B]ä¹‹åï¼Œå°±éœ€è¦å¤„ç†[7,B]çš„nextäº†å•Šï¼Œè€Œé€šè¿‡thread2çš„resizeä¹‹åï¼Œ[7,B]çš„nextå˜ä¸ºäº†[3,A]ï¼Œæ­¤æ—¶ï¼Œ[3,A]å’Œ[7,B]å½¢æˆäº†ç¯å½¢é“¾è¡¨ï¼Œåœ¨getçš„æ—¶å€™ï¼Œå¦‚æœgetçš„keyçš„æ¡¶ç´¢å¼•å’Œ[3,A]å’Œ[7,B]ä¸€æ ·ï¼Œé‚£ä¹ˆå°±ä¼šé™·å…¥æ­»å¾ªç¯ã€‚</span></p><p><span>å¦‚æœåœ¨å–é“¾è¡¨çš„æ—¶å€™ä»å¤´å¼€å§‹å–ï¼ˆç°åœ¨æ˜¯ä»å°¾éƒ¨å¼€å§‹å–ï¼‰çš„è¯ï¼Œåˆ™å¯ä»¥ä¿è¯èŠ‚ç‚¹ä¹‹é—´çš„é¡ºåºï¼Œé‚£æ ·å°±ä¸å­˜åœ¨è¿™æ ·çš„é—®é¢˜äº†ã€‚</span></p><p>&nbsp;</p><h3 id='hashmapå¯¹é‡å¤å…ƒç´ çš„æ£€æŸ¥'><span>HashMapå¯¹é‡å¤å…ƒç´ çš„æ£€æŸ¥</span></h3><p><span>å½“æŠŠä¸€ä¸ªå¯¹è±¡åŠ å…¥HashMapæ—¶ï¼Œä¼šå…ˆè®¡ç®—å¯¹è±¡çš„hashcodeåˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–åŠ å…¥çš„å¯¹è±¡çš„hashcodeå€¼æ¯”è¾ƒï¼Œå¦‚æœä¸åŒå°±å‡å®šæ²¡æœ‰é‡å¤å…ƒç´ ï¼Œå¦‚æœç›¸åŒå°±éœ€è¦è°ƒç”¨equal()æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯çœŸçš„ç›¸ç­‰ã€‚</span></p><h3 id='hashmapçš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹'><span>HashMapçš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹</span></h3><ul><li><p><span>hashå€¼çš„èŒƒå›´éå¸¸å¤§ï¼Œå†…å­˜æ˜¯æ”¾ä¸ä¸‹çš„ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå¯¹æ•°ç»„çš„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œå¾—åˆ°çš„ä½™æ•°æ‰èƒ½ç”¨æ¥è¦å­˜æ”¾çš„ä½ç½®ä¹Ÿå°±æ˜¯å¯¹åº”æ•°ç»„çš„ä¸‹æ ‡ã€‚</span><strong><span>å–ä½™æ“ä½œä¸­å¦‚æœé™¤æ•°æ˜¯2çš„å¹‚æ¬¡åˆ™ç­‰ä»·äºå…¶äºé™¤æ•°å‡ä¸€çš„ä¸ï¼ˆ&amp;ï¼‰æ“ä½œã€‚</span></strong><span> ä¹Ÿå°±æ˜¯è¯´ hash%length==hash&amp;(length-1)çš„å‰ææ˜¯ length æ˜¯ 2 çš„ n æ¬¡æ–¹ã€‚é‡‡ç”¨&amp;æ“ä½œï¼Œèƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ã€‚</span></p></li></ul><h3 id='hashmapå¸¸è§çš„éå†æ–¹å¼'><span>HashMapå¸¸è§çš„éå†æ–¹å¼</span></h3><blockquote><p><a href='https://mp.weixin.qq.com/s/Zz6mofCtmYpABDL1ap04ow' target='_blank' class='url'>https://mp.weixin.qq.com/s/Zz6mofCtmYpABDL1ap04ow</a></p></blockquote><ol start='' ><li><p><strong><span>è¿­ä»£å™¨(Iterator)æ–¹å¼éå†</span></strong></p></li></ol><ul><li><p><span>ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰EntrySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HashMapTest</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">map</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">1</span>, <span class="cm-string">"Java"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">2</span>, <span class="cm-string">"JDK"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">3</span>, <span class="cm-string">"Spring Framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">4</span>, <span class="cm-string">"MyBatis framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">5</span>, <span class="cm-string">"Javaä¸­æ–‡ç¤¾ç¾¤"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// éå†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Iterator</span><span class="cm-operator">&lt;</span><span class="cm-variable">Map</span>.<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">iterator</span> <span class="cm-operator">=</span> <span class="cm-variable">map</span>.<span class="cm-variable">entrySet</span>().<span class="cm-variable">iterator</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">while</span> (<span class="cm-variable">iterator</span>.<span class="cm-variable">hasNext</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span>.<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">entry</span> <span class="cm-operator">=</span> <span class="cm-variable">iterator</span>.<span class="cm-variable">next</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getKey</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getValue</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><ul><li><p><span>ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰KeySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HashMapTest</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">map</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">1</span>, <span class="cm-string">"Java"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">2</span>, <span class="cm-string">"JDK"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">3</span>, <span class="cm-string">"Spring Framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">4</span>, <span class="cm-string">"MyBatis framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">5</span>, <span class="cm-string">"Javaä¸­æ–‡ç¤¾ç¾¤"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// éå†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Iterator</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span><span class="cm-operator">&gt;</span> <span class="cm-variable">iterator</span> <span class="cm-operator">=</span> <span class="cm-variable">map</span>.<span class="cm-variable">keySet</span>().<span class="cm-variable">iterator</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">while</span> (<span class="cm-variable">iterator</span>.<span class="cm-variable">hasNext</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">Integer</span> <span class="cm-variable">key</span> <span class="cm-operator">=</span> <span class="cm-variable">iterator</span>.<span class="cm-variable">next</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">key</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">map</span>.<span class="cm-variable">get</span>(<span class="cm-variable">key</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><ol start='2' ><li><p><strong><span>For Eachéå†</span></strong></p></li></ol><ul><li><p><span>ä½¿ç”¨ For Each EntrySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HashMapTest</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">map</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">1</span>, <span class="cm-string">"Java"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">2</span>, <span class="cm-string">"JDK"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">3</span>, <span class="cm-string">"Spring Framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">4</span>, <span class="cm-string">"MyBatis framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">5</span>, <span class="cm-string">"Javaä¸­æ–‡ç¤¾ç¾¤"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// éå†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">Map</span>.<span class="cm-variable">Entry</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">entry</span> : <span class="cm-variable">map</span>.<span class="cm-variable">entrySet</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getKey</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getValue</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><ul><li><p><span>ä½¿ç”¨ For Each KeySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HashMapTest</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">map</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">1</span>, <span class="cm-string">"Java"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">2</span>, <span class="cm-string">"JDK"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">3</span>, <span class="cm-string">"Spring Framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">4</span>, <span class="cm-string">"MyBatis framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">5</span>, <span class="cm-string">"Javaä¸­æ–‡ç¤¾ç¾¤"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// éå†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">Integer</span> <span class="cm-variable">key</span> : <span class="cm-variable">map</span>.<span class="cm-variable">keySet</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">key</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">map</span>.<span class="cm-variable">get</span>(<span class="cm-variable">key</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><ol start='3' ><li><p><strong><span>Lambdaè¡¨è¾¾å¼éå†</span></strong></p></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HashMapTest</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">map</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">1</span>, <span class="cm-string">"Java"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">2</span>, <span class="cm-string">"JDK"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">3</span>, <span class="cm-string">"Spring Framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">4</span>, <span class="cm-string">"MyBatis framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">5</span>, <span class="cm-string">"Javaä¸­æ–‡ç¤¾ç¾¤"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// éå†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">forEach</span>((<span class="cm-variable">key</span>, <span class="cm-variable">value</span>) <span class="cm-operator">-&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">key</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><ol start='3' ><li><p><strong><span>Streams APIéå†</span></strong></p></li></ol><ul><li><p><span>ä½¿ç”¨ Streams API å•çº¿ç¨‹çš„æ–¹å¼è¿›è¡Œéå†ï¼›</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HashMapTest</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">map</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">1</span>, <span class="cm-string">"Java"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">2</span>, <span class="cm-string">"JDK"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">3</span>, <span class="cm-string">"Spring Framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">4</span>, <span class="cm-string">"MyBatis framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">5</span>, <span class="cm-string">"Javaä¸­æ–‡ç¤¾ç¾¤"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// éå†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">entrySet</span>().<span class="cm-variable">stream</span>().<span class="cm-variable">forEach</span>((<span class="cm-variable">entry</span>) <span class="cm-operator">-&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getKey</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getValue</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><ul><li><p><span>ä½¿ç”¨ Streams API å¤šçº¿ç¨‹çš„æ–¹å¼è¿›è¡Œéå†ã€‚</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HashMapTest</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">Integer</span>, <span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">map</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">1</span>, <span class="cm-string">"Java"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">2</span>, <span class="cm-string">"JDK"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">3</span>, <span class="cm-string">"Spring Framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">4</span>, <span class="cm-string">"MyBatis framework"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-number">5</span>, <span class="cm-string">"Javaä¸­æ–‡ç¤¾ç¾¤"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// éå†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">map</span>.<span class="cm-variable">entrySet</span>().<span class="cm-variable">parallelStream</span>().<span class="cm-variable">forEach</span>((<span class="cm-variable">entry</span>) <span class="cm-operator">-&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getKey</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">entry</span>.<span class="cm-variable">getValue</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><h2 id='62-concurrenthashmap'><span>6.2 ConcurrentHashMap</span></h2><h4 id='jdk17'><strong><span>JDK1.7</span></strong></h4><p><img src="assets/image-20240615214627839.png" referrerpolicy="no-referrer" alt="image-20240615214627839.png"></p><ol start='' ><li><p><strong><span>æ•°æ®ç»“æ„ï¼š</span></strong><span>é¦–å…ˆå°†æ•°æ®åˆ†ä¸ºä¸€æ®µä¸€æ®µçš„å­˜å‚¨ï¼Œç„¶åç»™æ¯ä¸€æ®µæ•°æ®é…ä¸€æŠŠé”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®å…¶ä¸­ä¸€ä¸ªæ®µæ•°æ®æ—¶ï¼Œå…¶ä»–æ®µçš„æ•°æ®ä¹Ÿèƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚</span><strong><span>åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨</span></strong></p></li></ol><ul><li><p><strong><span>ConcurrentHashMap</span></strong><span> æ˜¯ç”±</span><strong><span>åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨</span></strong><span>ç»„æˆã€‚</span></p></li><li><p><span>Segment ç»§æ‰¿äº† </span><strong><span>ReentrantLock</span></strong><span>,æ‰€ä»¥ Segment æ˜¯ä¸€ç§å¯é‡å…¥é”ï¼Œæ‰®æ¼”é”çš„â»†è‰²ã€‚HashEntry ç”¨äºå­˜å‚¨ é”®å€¼å¯¹æ•°æ®ã€‚</span></p></li><li><p><span>ä¸€ä¸ª ConcurrentHashMap é‡ŒåŒ…å«ä¸€ä¸ª Segment æ•°ç»„ã€‚Segment çš„ç»“æ„å’Œ HashMap ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§æ•°ç»„ å’Œé“¾è¡¨ç»“æ„ï¼Œä¸€ä¸ª Segment åŒ…å«ä¸€ä¸ª HashEntry æ•°ç»„ï¼Œæ¯ä¸ª HashEntry æ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„çš„å…ƒç´ ï¼Œæ¯ ä¸ª Segment å®ˆæŠ¤ç€ä¸€ä¸ª HashEntry æ•°ç»„é‡Œçš„å…ƒç´ ï¼Œå½“å¯¹ HashEntry æ•°ç»„çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¿…é¡»é¦– å…ˆè·å¾—å¯¹åº”çš„ Segment çš„é”ã€‚</span></p></li><li><p><span>ä¸€ä¸ª </span><code>ConcurrentHashMap</code><span> é‡ŒåŒ…å«ä¸€ä¸ª </span><code>Segment</code><span> æ•°ç»„ï¼Œ</span><code>Segment</code><span> çš„ä¸ªæ•°ä¸€æ—¦</span><strong><span>åˆå§‹åŒ–å°±ä¸èƒ½æ”¹å˜</span></strong><span>ã€‚ </span><code>Segment</code><span> æ•°ç»„çš„å¤§å°é»˜è®¤æ˜¯ 16ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤å¯ä»¥åŒæ—¶æ”¯æŒ 16 ä¸ªçº¿ç¨‹å¹¶å‘å†™ã€‚</span></p></li><li><p><code>Segment</code><span> çš„ç»“æ„å’Œ </span><code>HashMap</code><span> ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§æ•°ç»„å’Œé“¾è¡¨ç»“æ„ï¼Œä¸€ä¸ª </span><code>Segment</code><span> åŒ…å«ä¸€ä¸ª </span><code>HashEntry</code><span> æ•°ç»„ï¼Œæ¯ä¸ª </span><code>HashEntry</code><span> æ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„çš„å…ƒç´ ï¼Œæ¯ä¸ª </span><code>Segment</code><span> å®ˆæŠ¤ç€ä¸€ä¸ª </span><code>HashEntry</code><span> æ•°ç»„é‡Œçš„å…ƒç´ ï¼Œå½“å¯¹ </span><code>HashEntry</code><span> æ•°ç»„çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¿…é¡»é¦–å…ˆè·å¾—å¯¹åº”çš„ </span><code>Segment</code><span> çš„é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹åŒä¸€ </span><code>Segment</code><span> çš„å¹¶å‘å†™å…¥ä¼šè¢«é˜»å¡ï¼Œä¸åŒ </span><code>Segment</code><span> çš„å†™å…¥æ˜¯å¯ä»¥å¹¶å‘æ‰§è¡Œçš„ã€‚</span></p></li></ul><ol start='2' ><li><p><strong><span>put()æ“ä½œ</span></strong></p><p><span>Segmentå®ç°äº†ReentrantLock,ä¹Ÿå°±å¸¦æœ‰é”çš„åŠŸèƒ½ï¼Œå½“æ‰§è¡Œputæ“ä½œæ—¶ï¼Œä¼šè¿›è¡Œç¬¬ä¸€æ¬¡keyçš„hashæ¥å®šä½Segmentçš„ä½ç½®ï¼Œå¦‚æœè¯¥Segmentè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œå³é€šè¿‡CASæ“ä½œè¿›è¡Œèµ‹å€¼ï¼Œç„¶åè¿›è¡Œç¬¬äºŒæ¬¡hashæ“ä½œï¼Œæ‰¾åˆ°ç›¸åº”çš„HashEntryçš„ä½ç½®ï¼Œè¿™é‡Œä¼šåˆ©ç”¨ç»§æ‰¿è¿‡æ¥çš„é”çš„ç‰¹æ€§ï¼Œåœ¨å°†æ•°æ®æ’å…¥æŒ‡å®šçš„HashEntryä½ç½®æ—¶ï¼ˆé“¾è¡¨çš„å°¾ç«¯)ï¼Œä¼šé€šè¿‡ç»§æ‰¿ReentrantLockçš„tryLockï¼ˆï¼‰æ–¹æ³•å°è¯•å»è·å–é”ï¼Œå¦‚æœè·å–æˆåŠŸå°±ç›´æ¥æ’å…¥ç›¸åº”çš„ä½ç½®ï¼Œå¦‚æœå·²ç»æœ‰çº¿ç¨‹è·å–è¯¥Segmentçš„é”ï¼Œé‚£å½“å‰çº¿ç¨‹ä¼šä»¥è‡ªæ—‹çš„æ–¹å¼å»ç»§ç»­çš„è°ƒç”¨tryLockï¼ˆï¼‰æ–¹æ³•å»è·å–é”ï¼Œè¶…è¿‡æŒ‡å®šæ¬¡æ•°å°±æŒ‚èµ·ï¼Œç­‰å¾…å”¤é†’ã€‚</span></p><ul><li><p><span>é¦–å…ˆå¯¹keyè¿›è¡Œç¬¬ä¸€æ¬¡hashï¼Œé€šè¿‡hashå€¼ç¡®å®šsegmentçš„ä½ç½®</span></p></li><li><p><span>ç„¶ååœ¨segmentå†…è¿›è¡Œæ“ä½œï¼Œè·å–é”</span></p></li><li><p><span>æ¥ç€è·å–å½“å‰segmentçš„HashEntryæ•°ç»„ï¼Œç„¶åå¯¹keyè¿›è¡Œç¬¬äºŒæ¬¡hashï¼Œé€šè¿‡hashå€¼ç¡®å®šåœ¨HashEntryæ•°ç»„çš„ç´¢å¼•ä½ç½®ã€‚</span></p></li><li><p><span>ç„¶åå¯¹å½“å‰ç´¢å¼•çš„HashEntryé“¾è¿›è¡Œéå†ï¼Œå¦‚æœæœ‰ç›¸åŒçš„keyï¼Œåˆ™æ›¿æ¢ï¼›å¦‚æœæ²¡æœ‰é‡å¤çš„ï¼š</span></p><ul><li><p><span>å¦‚æœå½“å‰å®¹é‡å¤§äºæ‰©å®¹é˜€å€¼ï¼Œå°äºæœ€å¤§å®¹é‡ï¼Œ</span><strong><span>è¿›è¡Œæ‰©å®¹</span></strong><span>ã€‚</span></p></li><li><p><span>é“¾è¡¨</span><strong><span>å¤´æ’æ³•</span></strong><span>æ’å…¥ã€‚</span></p></li></ul></li><li><p><span>å…³é—­é”ï¼Œåœ¨æ•´ä¸ªputè¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œäº†2æ¬¡hashæ“ä½œï¼Œæ‰æœ€ç»ˆç¡®å®škeyçš„ä½ç½®ã€‚</span></p></li></ul></li><li><p><strong><span>æ‰©å®¹rehash</span></strong></p><p><span>ConcurrentHashMap çš„æ‰©å®¹åªä¼šæ‰©å®¹åˆ°åŸæ¥çš„ä¸¤å€ã€‚è€æ•°ç»„é‡Œçš„æ•°æ®ç§»åŠ¨åˆ°æ–°çš„æ•°ç»„æ—¶ï¼Œä½ç½®è¦ä¹ˆä¸å˜ï¼ˆå½“(e.hash &amp; oldCap) = 0æ—¶ï¼‰ï¼Œè¦ä¹ˆå˜ä¸º index+ oldSizeï¼Œå‚æ•°é‡Œçš„ node ä¼šåœ¨æ‰©å®¹ä¹‹åä½¿ç”¨é“¾è¡¨</span><strong><span>å¤´æ’æ³•</span></strong><span>æ’å…¥åˆ°æŒ‡å®šä½ç½®ã€‚</span></p></li><li><p><strong><span>get()æ“ä½œ</span></strong></p><ul><li><p><span>è®¡ç®—å¾—åˆ° key çš„å­˜æ”¾ä½ç½®ã€‚</span></p></li><li><p><span>éå†æŒ‡å®šä½ç½®æŸ¥æ‰¾ç›¸åŒ key çš„ value å€¼ã€‚</span></p></li></ul></li><li><p><strong><span>size()æ“ä½œ</span></strong></p><p><span>ç¬¬ä¸€ç§æ–¹æ¡ˆä»–ä¼šä½¿ç”¨ä¸åŠ é”çš„æ¨¡å¼å»å°è¯•å¤šæ¬¡è®¡ç®—ConcurrentHashMapçš„sizeï¼Œæœ€å¤šä¸‰æ¬¡ï¼Œæ¯”è¾ƒå‰åä¸¤æ¬¡è®¡ç®—çš„ç»“æœï¼Œç»“æœä¸€è‡´å°±è®¤ä¸ºå½“å‰æ²¡æœ‰å…ƒç´ åŠ å…¥ï¼Œè®¡ç®—çš„ç»“æœæ˜¯å‡†ç¡®çš„</span></p><p><span>ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯å¦‚æœç¬¬ä¸€ç§æ–¹æ¡ˆä¸ç¬¦åˆï¼Œä»–å°±ä¼šç»™æ¯ä¸ªSegmentåŠ ä¸Šé”ï¼Œç„¶åè®¡ç®—ConcurrentHashMapçš„sizeè¿”å›</span></p></li></ol><h4 id='jdk18'><span>JDK1.8</span></h4><p><span>å¯ä»¥å‘ç° Java8 çš„ ConcurrentHashMap ç›¸å¯¹äº Java7 æ¥è¯´å˜åŒ–æ¯”è¾ƒå¤§ï¼Œä¸å†æ˜¯ä¹‹å‰çš„ </span><strong><span>Segment æ•°ç»„ + HashEntry æ•°ç»„ + é“¾è¡¨</span></strong><span>ï¼Œè€Œæ˜¯ </span><strong><span>Node æ•°ç»„ + é“¾è¡¨ / çº¢é»‘æ ‘</span></strong><span>ã€‚å½“å†²çªé“¾è¡¨è¾¾åˆ°ä¸€å®šé•¿åº¦æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢æˆçº¢é»‘æ ‘ã€‚</span></p><p><img src="assets/image-20240615214612012.png" referrerpolicy="no-referrer" alt="image-20240615214612012.png"></p><ol start='' ><li><p><strong><span>åˆå§‹åŒ– initTable()</span></strong></p><ul><li><p><span>åˆå§‹åŒ–æ•°ç»„ï¼Œåªå…è®¸ä¸€ä¸ªæ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼Œå®ç°åŸç†ï¼Œåˆ©ç”¨sizeCtlï¼ŒsizeCtlé»˜è®¤ä¸º0ï¼Œ</span></p></li><li><p><span>whileå¾ªç¯åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºnullï¼Œä¸”æ•°ç»„é•¿åº¦æ˜¯å¦ä¸º0</span></p></li><li><p><span>åœ¨whileå†…éƒ¨ï¼Œå…ˆåˆ¤æ–­sizeCtlæ˜¯å¦å°äº0ï¼Œå¦‚æœå°äº0å°±è®©å‡ºcpuï¼Œè¯´æ˜åˆ«çš„çº¿ç¨‹æ­£åœ¨åˆå§‹åŒ–</span></p></li><li><p><span>å¦‚æœsizeCtlä¸å°äº0ï¼Œå°±è¿›è¡Œcasæ“ä½œï¼Œå°±sizeCtlè®¾ç½®ä¸º-1ï¼Œè®¾ç½®æˆåŠŸå°±å†åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºnullï¼Œä¸”æ•°ç»„é•¿åº¦æ˜¯å¦ä¸º0ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå°±è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”æŠŠsizeCtlè®¾ç½®ä¸ºn/2ï¼›å¦‚æœä¸æ»¡è¶³å°±é€€å‡ºå¾ªç¯</span></p></li><li><p><span>åˆå§‹åŒ–å®Œæ•°ç»„ï¼Œåˆ«çš„çº¿ç¨‹å¦‚æœè¿˜åœ¨initTableå‡½æ•°é‡Œï¼Œå°±ä¼šå°è¯•æŠŠsizeCtlè®¾ç½®ä¸º-1ï¼Œè®¾ç½®æˆåŠŸï¼Œåˆ¤æ–­æ•°ç»„ä¸ä¸ºnullï¼Œé€€å‡ºå¾ªç¯ã€‚</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">transient</span> <span class="cm-keyword">volatile</span> <span class="cm-variable-3">int</span> <span class="cm-variable">sizeCtl</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><ul><li><p><span>sizeCtlä¸º0ï¼Œä»£è¡¨æ•°ç»„æœªåˆå§‹åŒ–ï¼Œä¸”æ•°ç»„çš„åˆå§‹å®¹é‡ä¸º16</span></p></li><li><p><span>sizeCtlä¸ºæ­£æ•°ï¼Œå¦‚æœæ•°ç»„æœªåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå…¶è®°å½•çš„æ˜¯æ•°ç»„çš„åˆå§‹å®¹é‡ï¼Œå¦‚æœæ•°ç»„å·²ç»åˆå§‹åŒ–ï¼Œé‚£ä¹ˆå…¶è®°å½•çš„æ˜¯æ•°ç»„çš„æ‰©å®¹é˜ˆå€¼ã€‚</span></p></li><li><p><span>sizeCtlä¸º-1ï¼Œè¡¨ç¤ºæ•°ç»„æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–</span></p></li><li><p><span>sizeCtlå°äº0ï¼Œå¹¶ä¸”ä¸æ˜¯-1ï¼Œè¡¨ç¤ºæ•°ç»„æ­£åœ¨æ‰©å®¹ï¼Œ-(1 + n)è¡¨ç¤ºæ­¤æ—¶æœ‰nä¸ªçº¿ç¨‹æ­£åœ¨å…±åŒå®Œæˆæ•°ç»„çš„æ‰©å®¹æ“ä½œã€‚</span></p></li></ul></li><li><p><strong><span>put()æ–¹æ³•</span></strong></p></li></ol><ul><li><p><span>å¦‚æœæ²¡æœ‰åˆå§‹åŒ–å°±å…ˆè°ƒç”¨initTable()æ–¹æ³•æ¥è¿›è¡Œåˆå§‹åŒ–è¿‡ç¨‹</span></p></li><li><p><span>å¦‚æœæ²¡æœ‰hashå†²çªå°±ç›´æ¥CASæ’å…¥</span></p></li><li><p><span>å¦‚æœè¿˜åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œå°±å…ˆè¿›è¡Œåä½œæ‰©å®¹</span></p></li><li><p><span>å¦‚æœå­˜åœ¨hashå†²çªï¼Œå°±åŠ é”æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯é“¾è¡¨å½¢å¼å°±ç›´æ¥éå†åˆ°å°¾ç«¯æ’å…¥ï¼Œä¸€ç§æ˜¯çº¢é»‘æ ‘å°±æŒ‰ç…§çº¢é»‘æ ‘ç»“æ„æ’å…¥ï¼Œ</span></p></li><li><p><span>æœ€åä¸€ä¸ªå¦‚æœHashå†²çªæ—¶ä¼šå½¢æˆNodeé“¾è¡¨ï¼Œåœ¨é“¾è¡¨é•¿åº¦è¶…è¿‡8ï¼ŒNodeæ•°ç»„è¶…è¿‡64æ—¶ä¼šå°†é“¾è¡¨ç»“æ„è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„ç»“æ„ï¼Œbreaké€€å‡ºå¾ªç¯</span></p></li><li><p><span>å¦‚æœæ·»åŠ æˆåŠŸå°±è°ƒç”¨addCount()æ–¹æ³•ç»Ÿè®¡sizeï¼Œå¹¶ä¸”æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹ã€‚</span></p></li></ul><ol start='3' ><li><p><strong><span>get()æ–¹æ³•</span></strong></p><ul><li><p><span>è®¡ç®—hashå€¼ï¼Œå®šä½åˆ°è¯¥tableç´¢å¼•ä½ç½®ï¼Œå¦‚æœæ˜¯é¦–èŠ‚ç‚¹ç¬¦åˆå°±è¿”å›</span></p></li><li><p><span>å¦‚æœé‡åˆ°æ‰©å®¹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨æ ‡å¿—æ­£åœ¨æ‰©å®¹èŠ‚ç‚¹ForwardingNodeçš„findæ–¹æ³•ï¼ŒæŸ¥æ‰¾è¯¥èŠ‚ç‚¹ï¼ŒåŒ¹é…å°±è¿”å›</span></p></li><li><p><span>ä»¥ä¸Šéƒ½ä¸ç¬¦åˆçš„è¯ï¼Œå°±å¾€ä¸‹éå†èŠ‚ç‚¹ï¼ŒåŒ¹é…å°±è¿”å›ï¼Œå¦åˆ™æœ€åå°±è¿”å›null</span></p></li></ul></li></ol><h3 id='jdk-17-å’Œ-jdk-18-çš„-concurrenthashmap-å®ç°æœ‰ä»€ä¹ˆä¸åŒ'><span>JDK 1.7 å’Œ JDK 1.8 çš„ ConcurrentHashMap å®ç°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</span></h3><ul><li><p><strong><span>çº¿ç¨‹å®‰å…¨å®ç°æ–¹å¼</span></strong><span>ï¼šJDK 1.7 é‡‡ç”¨ </span><code>Segment</code><span> åˆ†æ®µé”æ¥ä¿è¯å®‰å…¨ï¼Œ </span><code>Segment</code><span> æ˜¯ç»§æ‰¿è‡ª </span><code>ReentrantLock</code><span>ã€‚JDK1.8 æ”¾å¼ƒäº† </span><code>Segment</code><span> åˆ†æ®µé”çš„è®¾è®¡ï¼Œé‡‡ç”¨ </span><code>Node + CAS + synchronized</code><span> ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œé”ç²’åº¦æ›´ç»†ï¼Œ</span><code>synchronized</code><span> åªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘äºŒå‰æ ‘çš„é¦–èŠ‚ç‚¹ã€‚</span></p></li><li><p><strong><span>Hash ç¢°æ’è§£å†³æ–¹æ³•</span></strong><span> : JDK 1.7 é‡‡ç”¨æ‹‰é“¾æ³•ï¼ŒJDK1.8 é‡‡ç”¨æ‹‰é“¾æ³•ç»“åˆçº¢é»‘æ ‘ï¼ˆé“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼‰ã€‚</span></p></li><li><p><strong><span>å¹¶å‘åº¦</span></strong><span>ï¼šJDK 1.7 æœ€å¤§å¹¶å‘åº¦æ˜¯ Segment çš„ä¸ªæ•°ï¼Œé»˜è®¤æ˜¯ 16ã€‚JDK 1.8 æœ€å¤§å¹¶å‘åº¦æ˜¯ Node æ•°ç»„çš„å¤§å°ï¼Œå¹¶å‘åº¦æ›´å¤§ã€‚</span></p></li></ul><h3 id='concurrenthashmap-ä¸ºä»€ä¹ˆ-key-å’Œ-value-ä¸èƒ½ä¸º-null'><span>ConcurrentHashMap ä¸ºä»€ä¹ˆ key å’Œ value ä¸èƒ½ä¸º nullï¼Ÿ</span></h3><p><code>ConcurrentHashMap</code><span> çš„ key å’Œ value ä¸èƒ½ä¸º null ä¸»è¦æ˜¯ä¸ºäº†é¿å…äºŒä¹‰æ€§ã€‚null æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œè¡¨ç¤ºæ²¡æœ‰å¯¹è±¡æˆ–æ²¡æœ‰å¼•ç”¨ã€‚å¦‚æœä½ ç”¨ null ä½œä¸ºé”®ï¼Œé‚£ä¹ˆä½ å°±æ— æ³•åŒºåˆ†è¿™ä¸ªé”®æ˜¯å¦å­˜åœ¨äº </span><code>ConcurrentHashMap</code><span> ä¸­ï¼Œè¿˜æ˜¯æ ¹æœ¬æ²¡æœ‰è¿™ä¸ªé”®ã€‚åŒæ ·ï¼Œå¦‚æœä½ ç”¨ null ä½œä¸ºå€¼ï¼Œé‚£ä¹ˆä½ å°±æ— æ³•åŒºåˆ†è¿™ä¸ªå€¼æ˜¯å¦æ˜¯çœŸæ­£å­˜å‚¨åœ¨ </span><code>ConcurrentHashMap</code><span> ä¸­çš„ï¼Œè¿˜æ˜¯å› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„é”®è€Œè¿”å›çš„ã€‚</span></p><p><span>æ‹¿ get æ–¹æ³•å–å€¼æ¥è¯´ï¼Œè¿”å›çš„ç»“æœä¸º null å­˜åœ¨ä¸¤ç§æƒ…å†µï¼š</span></p><ul><li><p><span>å€¼æ²¡æœ‰åœ¨é›†åˆä¸­ ï¼›</span></p></li><li><p><span>å€¼æœ¬èº«å°±æ˜¯ nullã€‚</span></p></li></ul><p><span>è¿™ä¹Ÿå°±æ˜¯äºŒä¹‰æ€§çš„ç”±æ¥</span></p><p><span>å› ä¸ºConcurrentHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸€èˆ¬ä½¿ç”¨åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œä½ ä¸€å¼€å§‹getæ–¹æ³•è·å–åˆ°nullä¹‹åï¼Œå†å»è°ƒç”¨</span><code>containsKe</code><span>yæ–¹æ³•ï¼Œæ²¡æ³•ç¡®ä¿getæ–¹æ³•å’Œ</span><code>containsKey</code><span>æ–¹æ³•ä¹‹é—´ï¼Œæ²¡æœ‰åˆ«çš„çº¿ç¨‹æ¥æ£ä¹±ï¼Œåˆšå¥½æŠŠä½ è¦æŸ¥è¯¢çš„å¯¹è±¡è®¾ç½®äº†è¿›å»æˆ–è€…åˆ é™¤æ‰äº†ã€‚</span></p><p><span>ä¸æ­¤å½¢æˆå¯¹æ¯”çš„æ˜¯ï¼Œ</span><code>HashMap</code><span> å¯ä»¥å­˜å‚¨ null çš„ key å’Œ valueï¼Œä½† null ä½œä¸ºé”®åªèƒ½æœ‰ä¸€ä¸ªï¼Œnull ä½œä¸ºå€¼å¯ä»¥æœ‰å¤šä¸ªã€‚å¦‚æœä¼ å…¥ null ä½œä¸ºå‚æ•°ï¼Œå°±ä¼šè¿”å› hash å€¼ä¸º 0 çš„ä½ç½®çš„å€¼ã€‚å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹æ“ä½œè¯¥ HashMap æ—¶ï¼Œå…¶ä»–çš„çº¿ç¨‹å°†è¯¥ </span><code>HashMap</code><span> ä¿®æ”¹çš„æƒ…å†µï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ </span><code>contains(key)</code><span>æ¥åšåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™ä¸ªé”®å€¼å¯¹ï¼Œä»è€Œåšç›¸åº”çš„å¤„ç†ï¼Œä¹Ÿå°±ä¸å­˜åœ¨äºŒä¹‰æ€§é—®é¢˜ã€‚</span></p><h3 id='concurrenthashmap-èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—'><span>ConcurrentHashMap èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—ï¼Ÿ</span></h3><p><code>ConcurrentHashMap</code><span> æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ„å‘³ç€å®ƒå¯ä»¥ä¿è¯å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹å®ƒè¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œä¸ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ JDK1.7 åŠä¹‹å‰ç‰ˆæœ¬çš„ </span><code>HashMap</code><span> å¤šçº¿ç¨‹æ“ä½œå¯¼è‡´æ­»å¾ªç¯é—®é¢˜ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€å®ƒå¯ä»¥ä¿è¯æ‰€æœ‰çš„å¤åˆæ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œä¸€å®šä¸è¦ææ··äº†ï¼</span></p><p><span>å¤åˆæ“ä½œæ˜¯æŒ‡ç”±å¤šä¸ªåŸºæœ¬æ“ä½œ(å¦‚</span><code>put</code><span>ã€</span><code>get</code><span>ã€</span><code>remove</code><span>ã€</span><code>containsKey</code><span>ç­‰)ç»„æˆçš„æ“ä½œï¼Œä¾‹å¦‚å…ˆåˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨</span><code>containsKey(key)</code><span>ï¼Œç„¶åæ ¹æ®ç»“æœè¿›è¡Œæ’å…¥æˆ–æ›´æ–°</span><code>put(key, value)</code><span>ã€‚è¿™ç§æ“ä½œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­ï¼Œå¯¼è‡´ç»“æœä¸ç¬¦åˆé¢„æœŸã€‚</span></p><p><span>ä¾‹å¦‚ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹ A å’Œ B åŒæ—¶å¯¹ </span><code>ConcurrentHashMap</code><span> è¿›è¡Œå¤åˆæ“ä½œï¼Œå¦‚ä¸‹ï¼š</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// çº¿ç¨‹ A</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">map</span>.<span class="cm-variable">containsKey</span>(<span class="cm-variable">key</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-variable">key</span>, <span class="cm-variable">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// çº¿ç¨‹ B</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">map</span>.<span class="cm-variable">containsKey</span>(<span class="cm-variable">key</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">map</span>.<span class="cm-variable">put</span>(<span class="cm-variable">key</span>, <span class="cm-variable">anotherValue</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><span>å¦‚æœçº¿ç¨‹ A å’Œ B çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·ï¼š</span></p><ol start='' ><li><p><span>çº¿ç¨‹ A åˆ¤æ–­ map ä¸­ä¸å­˜åœ¨ key</span></p></li><li><p><span>çº¿ç¨‹ B åˆ¤æ–­ map ä¸­ä¸å­˜åœ¨ key</span></p></li><li><p><span>çº¿ç¨‹ B å°† (key, anotherValue) æ’å…¥ map</span></p></li><li><p><span>çº¿ç¨‹ A å°† (key, value) æ’å…¥ map</span></p></li></ol><p><span>é‚£ä¹ˆæœ€ç»ˆçš„ç»“æœæ˜¯ (key, value)ï¼Œè€Œä¸æ˜¯é¢„æœŸçš„ (key, anotherValue)ã€‚è¿™å°±æ˜¯å¤åˆæ“ä½œçš„éåŸå­æ€§å¯¼è‡´çš„é—®é¢˜ã€‚</span></p><p><strong><span>é‚£å¦‚ä½•ä¿è¯ </span><code>ConcurrentHashMap</code><span> å¤åˆæ“ä½œçš„åŸå­æ€§å‘¢ï¼Ÿ</span></strong></p><p><code>ConcurrentHashMap</code><span> æä¾›äº†ä¸€äº›åŸå­æ€§çš„å¤åˆæ“ä½œï¼Œå¦‚ </span><code>putIfAbsent</code><span>ã€</span><code>compute</code><span>ã€</span><code>computeIfAbsent</code><span> ã€</span><code>computeIfPresent</code><span>ã€</span><code>merge</code><span>ç­‰ã€‚è¿™äº›æ–¹æ³•éƒ½å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ ¹æ®ç»™å®šçš„ key å’Œ value æ¥è®¡ç®—ä¸€ä¸ªæ–°çš„ valueï¼Œå¹¶ä¸”å°†å…¶æ›´æ–°åˆ° map ä¸­ã€‚</span></p><p><span>å¾ˆå¤šåŒå­¦å¯èƒ½ä¼šè¯´äº†ï¼Œè¿™ç§æƒ…å†µä¹Ÿèƒ½åŠ é”åŒæ­¥å‘€ï¼ç¡®å®å¯ä»¥ï¼Œä½†ä¸å»ºè®®ä½¿ç”¨åŠ é”çš„åŒæ­¥æœºåˆ¶ï¼Œè¿èƒŒäº†ä½¿ç”¨ </span><code>ConcurrentHashMap</code><span> çš„åˆè¡·ã€‚åœ¨ä½¿ç”¨ </span><code>ConcurrentHashMap</code><span> çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨è¿™äº›åŸå­æ€§çš„å¤åˆæ“ä½œæ–¹æ³•æ¥ä¿è¯åŸå­æ€§ã€‚</span></p><h1 id='å¯¹æ¯”'><span>å¯¹æ¯”</span></h1><h2 id='arraylist-å’Œ-arrayæ•°ç»„ï¼‰çš„åŒºåˆ«'><span>ArrayList å’Œ Arrayï¼ˆæ•°ç»„ï¼‰çš„åŒºåˆ«</span></h2><p><code>ArrayList</code><span> å†…éƒ¨åŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œæ¯” </span><code>Array</code><span>ï¼ˆé™æ€æ•°ç»„ï¼‰ ä½¿ç”¨èµ·æ¥æ›´åŠ çµæ´»ï¼š</span></p><ul><li><p><code>ArrayList</code><span>ä¼šæ ¹æ®å®é™…å­˜å‚¨çš„å…ƒç´ åŠ¨æ€åœ°æ‰©å®¹æˆ–ç¼©å®¹ï¼Œè€Œ </span><code>Array</code><span> è¢«åˆ›å»ºä¹‹åå°±ä¸èƒ½æ”¹å˜å®ƒçš„é•¿åº¦äº†ã€‚</span></p></li><li><p><code>ArrayList</code><span> å…è®¸ä½ ä½¿ç”¨æ³›å‹æ¥ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œ</span><code>Array</code><span> åˆ™ä¸å¯ä»¥ã€‚</span></p></li><li><p><code>ArrayList</code><span> ä¸­åªèƒ½å­˜å‚¨å¯¹è±¡ã€‚å¯¹äºåŸºæœ¬ç±»å‹æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨å…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼ˆå¦‚ Integerã€Double ç­‰ï¼‰ã€‚</span><code>Array</code><span> å¯ä»¥ç›´æ¥å­˜å‚¨åŸºæœ¬ç±»å‹æ•°æ®ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¯¹è±¡ã€‚</span></p></li><li><p><code>ArrayList</code><span> æ”¯æŒæ’å…¥ã€åˆ é™¤ã€éå†ç­‰å¸¸è§æ“ä½œï¼Œå¹¶ä¸”æä¾›äº†ä¸°å¯Œçš„ API æ“ä½œæ–¹æ³•ï¼Œæ¯”å¦‚ </span><code>add()</code><span>ã€</span><code>remove()</code><span>ç­‰ã€‚</span><code>Array</code><span> åªæ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•°ç»„ï¼Œåªèƒ½æŒ‰ç…§ä¸‹æ ‡è®¿é—®å…¶ä¸­çš„å…ƒç´ ï¼Œä¸å…·å¤‡åŠ¨æ€æ·»åŠ ã€åˆ é™¤å…ƒç´ çš„èƒ½åŠ›ã€‚</span></p></li><li><p><code>ArrayList</code><span>åˆ›å»ºæ—¶ä¸éœ€è¦æŒ‡å®šå¤§å°ï¼Œè€Œ</span><code>Array</code><span>åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ã€‚</span></p></li></ul><p><span>ä¸‹é¢æ˜¯äºŒè€…ä½¿ç”¨çš„ç®€å•å¯¹æ¯”ï¼š</span></p><p><span>Arrayï¼š</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// åˆå§‹åŒ–ä¸€ä¸ª String ç±»å‹çš„æ•°ç»„</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable-3">String</span>[] <span class="cm-variable">stringArr</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-3">String</span>[]{<span class="cm-string">"hello"</span>, <span class="cm-string">"world"</span>, <span class="cm-string">"!"</span>};</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// ä¿®æ”¹æ•°ç»„å…ƒç´ çš„å€¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">stringArr</span>[<span class="cm-number">0</span>] <span class="cm-operator">=</span> <span class="cm-string">"goodbye"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">Arrays</span>.<span class="cm-variable">toString</span>(<span class="cm-variable">stringArr</span>));<span class="cm-comment">// [goodbye, world, !]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œéœ€è¦æ‰‹åŠ¨ç§»åŠ¨åé¢çš„å…ƒç´ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">stringArr</span>.<span class="cm-variable">length</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">stringArr</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">stringArr</span>[<span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">stringArr</span>[<span class="cm-variable">stringArr</span>.<span class="cm-variable">length</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">Arrays</span>.<span class="cm-variable">toString</span>(<span class="cm-variable">stringArr</span>));<span class="cm-comment">// [world, !, null]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><p><span>ArrayListï¼š</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="Java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// åˆå§‹åŒ–ä¸€ä¸ª String ç±»å‹çš„ ArrayList</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">stringList</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;&gt;</span>(<span class="cm-variable">Arrays</span>.<span class="cm-variable">asList</span>(<span class="cm-string">"hello"</span>, <span class="cm-string">"world"</span>, <span class="cm-string">"!"</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// æ·»åŠ å…ƒç´ åˆ° ArrayList ä¸­</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">stringList</span>.<span class="cm-variable">add</span>(<span class="cm-string">"goodbye"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">stringList</span>);<span class="cm-comment">// [hello, world, !, goodbye]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// ä¿®æ”¹ ArrayList ä¸­çš„å…ƒç´ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">stringList</span>.<span class="cm-variable">set</span>(<span class="cm-number">0</span>, <span class="cm-string">"hi"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">stringList</span>);<span class="cm-comment">// [hi, world, !, goodbye]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// åˆ é™¤ ArrayList ä¸­çš„å…ƒç´ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">stringList</span>.<span class="cm-variable">remove</span>(<span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">stringList</span>); <span class="cm-comment">// [world, !, goodbye]</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><p>&nbsp;</p><h2 id='arraylistä¸vectorçš„åŒºåˆ«'><span>ArrayListä¸Vectorçš„åŒºåˆ«</span></h2><ul><li><p><code>ArrayList</code><span>ï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼›</span></p></li><li><p><code>Vector</code><span>: çº¿ç¨‹å®‰å…¨ã€‚ä½¿ç”¨synchronizedå…³é”®å­—</span></p></li><li><p><span>Vector æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å¼€é”€å°±æ¯” ArrayList è¦å¤§ï¼Œè®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚æœ€å¥½ä½¿ç”¨ ArrayList è€Œä¸æ˜¯ Vectorï¼Œå› ä¸ºåŒæ­¥æ“ä½œå®Œå…¨å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªå·±æ¥æ§åˆ¶ï¼›</span></p></li><li><p><span>Vector æ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„ 2 å€ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®å¢é•¿çš„å®¹é‡ï¼‰ï¼Œè€Œ ArrayList æ˜¯ 1.5 å€ã€‚</span></p></li></ul><h2 id='arraylistä¸linkedlistçš„æ¯”è¾ƒ'><span>ArrayListä¸LinkedListçš„æ¯”è¾ƒ</span></h2><ul><li><p><strong><span>æ˜¯å¦ä¿è¯çº¿ç¨‹å®‰å…¨ï¼š</span></strong><span> äºŒè€…éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ï¼›</span></p></li><li><p><strong><span>åº•å±‚æ•°æ®ç»“æ„ï¼š</span></strong><span> </span><code>ArayList</code><span>åº•å±‚ä½¿ç”¨çš„æ˜¯</span><code>Object</code><span>æ•°ç»„ï¼Œ</span><code>LinkedList</code><span>åº•å±‚ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨ã€‚(JDK1.6ä¹‹å‰æ˜¯åŒå‘å¾ªç¯é“¾è¡¨,JDK1.7å–æ¶ˆäº†å¾ªç¯)ã€‚</span></p></li><li><p><strong><span>æ’å…¥å’Œåˆ é™¤å…ƒç´ </span></strong><span>ï¼š</span><code>ArrayList</code><span>é‡‡ç”¨æ•°ç»„å­˜å‚¨ï¼Œæ‰€ä»¥æ’å…¥åˆ é™¤çš„ä»£ä»·å¾ˆé«˜ï¼Œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ï¼Œ</span><code>LinkedList</code><span> æ’å…¥åˆ é™¤åªéœ€è¦æ”¹å˜æŒ‡é’ˆã€‚</span></p></li><li><p><strong><span>æ˜¯å¦æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®:</span></strong><span> </span><code>ArrayList</code><span>æ”¯æŒï¼Œ</span><code>LinkedList</code><span>ä¸æ”¯æŒã€‚</span></p></li><li><p><strong><span>å†…å­˜ç©ºé—´å ç”¨:</span></strong><span> </span><code>ArrayList</code><span>çš„ç©ºé—´æµªè´¹ä¸»è¦ä½“ç°åœ¨liståˆ—è¡¨çš„ç»“å°¾ä¼šé¢„ç•™ä¸€å®šçš„å®¹é‡ç©ºé—´ï¼Œè€Œ</span><code>LinkedList</code><span>çš„ç©ºé—´èŠ±è´¹åˆ™ä½“ç°åœ¨å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¦æ¶ˆè€—æ¯”ArrayListæ›´å¤šçš„ç©ºé—´(å› ä¸ºè¦å­˜æ”¾ç›´æ¥åç»§å’Œç›´æ¥å‰é©±ä»¥åŠæ•°æ®ã€‚</span></p></li></ul><h2 id='hashmapå’Œhashtableçš„åŒºåˆ«'><span>HashMapå’ŒHashTableçš„åŒºåˆ«</span></h2><ol start='' ><li><p><strong><span>çº¿ç¨‹æ˜¯å¦å®‰å…¨</span></strong><span>ï¼š</span><code>HashMap</code><span>æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œ</span><code>HashTable</code><span>æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸º</span><code>HashTable</code><span>å†…éƒ¨çš„æ–¹æ³•éƒ½ç»è¿‡</span><code>synchronized</code><span>ä¿®é¥°ã€‚</span></p></li><li><p><strong><span>æ•ˆç‡ï¼š</span></strong><span> å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œ</span><code>HashMap</code><span>çš„æ•ˆç‡è¾ƒé«˜ã€‚</span></p></li><li><p><strong><span>å¯¹null keyå’Œnull valueçš„æ”¯æŒï¼š</span></strong><span> </span><code>HashMap</code><span>æ”¯æŒï¼Œ</span><code>HashTable</code><span>ä¸æ”¯æŒã€‚</span></p></li><li><p><strong><span>åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å®¹é‡å¤§å°</span></strong></p></li></ol><ul><li><p><span>åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šåˆå§‹å®¹é‡ï¼Œ</span><code>HashMap</code><span>çš„åˆå§‹å®¹é‡æ—¶16, ä¹‹åæ¯æ¬¡æ‰©å®¹éƒ½ä¸ºåŸæ¥çš„2å€ï¼Œ</span><code>HashTable</code><span>çš„åˆå§‹å®¹é‡æ˜¯11ï¼Œä¹‹åæ¯æ¬¡æ‰©å®¹éƒ½ä¸ºåŸæ¥çš„2n+1;</span></p></li><li><p><span>åˆ›å»ºæ—¶å¦‚æœæŒ‡å®šåˆå§‹å®¹é‡ï¼Œ</span><code>HashMap</code><span>ä¼šæ‰©ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ï¼Œ</span><code>HashTable</code><span>ä¼šç›´æ¥ä½¿ç”¨ç»™å®šçš„å¤§å°ã€‚</span></p></li></ul><ol start='5' ><li><p><strong><span>åº•å±‚æ•°æ®ç»“æ„</span></strong></p></li></ol><ul><li><p><span>JDK1.8ä¹‹å‰äºŒè€…éƒ½æ˜¯</span><strong><span>æ•°ç»„+é“¾è¡¨</span></strong><span>ï¼›</span></p></li><li><p><span>JDK1.8ä¹‹åï¼Œ</span><code>HashMap</code><span>é‡‡ç”¨</span><strong><span>æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘ã€‚</span></strong><span> å½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 8ï¼‰å¹¶ä¸” HashMap æ•°ç»„é•¿åº¦è¶…è¿‡ 64 çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œé“¾è¡¨è½¬çº¢é»‘æ ‘çš„æ“ä½œï¼Œå¦åˆ™å°±åªæ˜¯å¯¹æ•°ç»„æ‰©å®¹ã€‚</span></p></li></ul><h2 id='hashmapå’Œhashsetçš„åŒºåˆ«'><span>HashMapå’ŒHashSetçš„åŒºåˆ«</span></h2><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><code>HashMap</code></th><th style='text-align:center;' ><code>HashSet</code></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>å®ç°äº† </span><code>Map</code><span> æ¥å£</span></td><td style='text-align:center;' ><span>å®ç° </span><code>Set</code><span> æ¥å£</span></td></tr><tr><td style='text-align:center;' ><span>å­˜å‚¨é”®å€¼å¯¹</span></td><td style='text-align:center;' ><span>ä»…å­˜å‚¨å¯¹è±¡</span></td></tr><tr><td style='text-align:center;' ><span>è°ƒç”¨ </span><code>put()</code><span>å‘ map ä¸­æ·»åŠ å…ƒç´ </span></td><td style='text-align:center;' ><span>è°ƒç”¨ </span><code>add()</code><span>æ–¹æ³•å‘ </span><code>Set</code><span> ä¸­æ·»åŠ å…ƒç´ </span></td></tr><tr><td style='text-align:center;' ><code>HashMap</code><span> ä½¿ç”¨é”®ï¼ˆKeyï¼‰è®¡ç®— </span><code>hashcode</code></td><td style='text-align:center;' ><code>HashSet</code><span> ä½¿ç”¨æˆå‘˜å¯¹è±¡æ¥è®¡ç®— </span><code>hashcode</code><span> å€¼ï¼Œå¯¹äºä¸¤ä¸ªå¯¹è±¡æ¥è¯´ </span><code>hashcode</code><span> å¯èƒ½ç›¸åŒï¼Œæ‰€ä»¥</span><code>equals()</code><span>æ–¹æ³•ç”¨æ¥åˆ¤æ–­å¯¹è±¡çš„ç›¸ç­‰æ€§</span></td></tr></tbody></table></figure><h2 id='concurrenthashmapå’Œhashtableçš„åŒºåˆ«'><span>ConcurrentHashMapå’ŒHashTableçš„åŒºåˆ«</span></h2><ol start='' ><li><p><strong><span>åº•å±‚æ•°æ®ç»“æ„</span></strong></p></li></ol><ul><li><p><span>JDK1.7çš„</span><code>ConcurrentHashMap</code><span>åº•å±‚é‡‡ç”¨</span><strong><span>åˆ†æ®µæ•°ç»„+é“¾è¡¨</span></strong><span> å®ç°ï¼ŒJDK1.8é‡‡ç”¨çš„æ•°æ®ç»“æ„ä¸º</span><strong><span>æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘</span></strong><span> ã€‚åˆå§‹å®¹é‡ä¸º16.</span></p></li><li><p><code>HashTable</code><span>é‡‡ç”¨</span><strong><span>æ•°ç»„+é“¾è¡¨</span></strong><span>ã€‚</span></p></li></ul><ol start='2' ><li><p><span>å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼</span></p></li></ol><ul><li><p><code>ConcurrentHashMap</code><span>: </span><strong><span>JDK1.7ä½¿ç”¨åˆ†æ®µé”</span></strong><span>çš„æ–¹å¼ï¼Œæ¯ä¸€æŠŠé”åªé”å®¹å™¨ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨ä¸­ä¸åŒæ•°æ®æ®µçš„æ•°æ®å°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚ </span><strong><span>JDK1.8å¹¶å‘ä½¿ç”¨synchronizedå’ŒCAS</span></strong><span>çš„æ–¹å¼ã€‚åªé”å½“å‰é“¾è¡¨æˆ–è€…çº¢é»‘äºŒå‰æ ‘çš„é¦–èŠ‚ç‚¹ï¼Œè¿™æ ·åªè¦hashä¸å†²çªï¼Œæ—¢ä¸ä¼šäº§ç”Ÿå¹¶å‘ã€‚</span></p></li><li><p><code>HashTable</code><span>ä½¿ç”¨</span><code>synchronized</code><span>æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</span></p></li></ul><h2 id='hashmapä¸treemapçš„åŒºåˆ«'><span>HashMapä¸TreeMapçš„åŒºåˆ«</span></h2><p><span>ç›¸å¯¹äº</span><code>HashMap</code><span>æ¥è¯´ï¼Œ</span><code>TreeMap</code><span>ä¸»è¦å¤šäº†å¯¹é›†åˆä¸­é¢å…ƒç´ æ ¹æ®é”®æ’åºçš„èƒ½åŠ›ä»¥åŠå¯¹é›†åˆå†…å…ƒç´ æœç´¢çš„èƒ½åŠ›ã€‚</span></p><h2 id='æ¯”è¾ƒhashsetlinkedhashsetå’Œtreesetä¸‰è€…çš„å¼‚åŒ'><span>æ¯”è¾ƒHashSet,LinkedHashSetå’ŒTreeSetä¸‰è€…çš„å¼‚åŒ</span></h2><ul><li><p><code>HashSet</code><span>çš„åº•å±‚æ˜¯</span><code>HashMap</code><span>,çº¿ç¨‹ä¸å®‰å…¨ï¼Œå¯ä»¥å­˜nullå€¼ã€‚</span></p></li><li><p><code>LinkedHashSet</code><span>æ˜¯</span><code>HashSet</code><span>çš„å­ç±»ï¼Œèƒ½å¤ŸæŒ‰ç…§æ·»åŠ çš„é¡ºåºéå†ã€‚</span></p></li><li><p><code>TreeSet</code><span>åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ï¼Œèƒ½å¤ŸæŒ‰ç…§æ·»åŠ å…ƒç´ çš„é¡ºåºè¿›è¡Œéå†ï¼Œæ’åºçš„æ–¹å¼æœ‰è‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºã€‚</span></p></li></ul><h2 id='çº¢é»‘æ ‘çš„ç‰¹ç‚¹'><span>çº¢é»‘æ ‘çš„ç‰¹ç‚¹</span></h2><p><span>çº¢é»‘æ ‘æ˜¯ä¸€ç§å«æœ‰çº¢é»‘ç»“ç‚¹å¹¶èƒ½è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ã€‚</span></p><ol start='' ><li><p><span>æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯é»‘è‰²çš„ï¼Œè¦ä¹ˆæ˜¯çº¢è‰²çš„ã€‚</span></p></li><li><p><span>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ã€‚</span></p></li><li><p><span>æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²çš„ã€‚</span></p></li><li><p><span>æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹ä¸€å®šéƒ½æ˜¯é»‘è‰²çš„ã€‚</span></p></li><li><p><span>ä»»æ„ä¸€ç»“ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„é»‘ç»“ç‚¹ã€‚</span></p></li></ol><p>&nbsp;</p></div></div>

<script>(function(){var e=document.body.parentElement,t=[],n=null,i=document.body.classList.contains("typora-export-collapse-outline"),r=function(e,t,n){document.addEventListener(e,function(e){if(!e.defaultPrevented)for(var i=e.target;i&&i!=this;i=i.parentNode)if(i.matches(t)){!1===n.call(i,e)&&(e.preventDefault(),e.stopPropagation());break}},!1)};function o(){return e.scrollTop}r("click",".outline-expander",function(e){var t=this.closest(".outline-item-wrapper").classList;return t.contains("outline-item-open")?t.remove("outline-item-open"):t.add("outline-item-open"),d(),!1}),r("click",".outline-item",function(e){var t=this.querySelector(".outline-label");if(location.hash="#"+t.getAttribute("href"),i){var n=this.closest(".outline-item-wrapper").classList;n.contains("outline-item-open")||n.add("outline-item-open"),c(),n.add("outline-item-active")}});var a,s,l=function(){var e=o();n=null;for(var i=0;i<t.length&&t[i][1]-e<60;i++)n=t[i]},c=function(){document.querySelectorAll(".outline-item-active").forEach(e=>e.classList.remove("outline-item-active")),document.querySelectorAll(".outline-item-single.outline-item-open").forEach(e=>e.classList.remove("outline-item-open"))},d=function(){if(n){c();var e=document.querySelector('.outline-label[href="#'+(CSS.escape?CSS.escape(n[0]):n[0])+'"]');if(e)if(i){var t=e.closest(".outline-item-open>ul>.outline-item-wrapper");if(t)t.classList.add("outline-item-active");else{for(var r=(e=e.closest(".outline-item-wrapper")).parentElement.closest(".outline-item-wrapper");r;)r=(e=r).parentElement.closest(".outline-item-wrapper");e.classList.add("outline-item-active")}}else e.closest(".outline-item-wrapper").classList.add("outline-item-active")}};window.addEventListener("scroll",function(e){a&&clearTimeout(a),a=setTimeout(function(){l(),d()},300)});var u=function(){s=setTimeout(function(){!function(){t=[];var e=o();document.querySelector("#write").querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(n=>{var i=n.getAttribute("id");t.push([i,e+n.getBoundingClientRect().y])})}(),l(),d()},300)};window.addEventListener("resize",function(e){s&&clearTimeout(s),u()}),u()})();</script></body>
</html>