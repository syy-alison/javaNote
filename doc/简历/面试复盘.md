# paypal

1. 乐观锁和悲观锁的区别
2. hashCode()和equal()的区别
3. Mysql数据库InoDB的存储的数据结构，为什么要用B+树
4. **B树的应用场景**：
5. Redis为什么那么快？
6. 索引失效的情况
7. **基于数据库实现分布式锁，他是乐观锁还是悲观锁**
8. **k8s和容器**
9. **Http和RPC的区别，哪个更快**
10. **java的Map：TreeMap了解吗**
11. **Java Stream流**
12. 对RabbitMQ的了解
13. Kafka多个消费组如何收到同一个topic的消息
14. **Hibernate和mybatis**
15. 公司用的java的版本以及Spring框架的版本
16. 覆盖索引是什么？
17. 缓存击穿是什么？
18. 代码题：删除链表中比X大的数据
19. 代码题：给一个字符串，计算包含这个字符串所有元素的最小子串长度
20. 代码题：线程同时开始，计算从线程开始到最后一个线程结束的时间。

# 字节一面

- 深度分页优化
- 覆盖索引是什么？
- 更新一条语句，乐观锁和悲观锁分别怎么做
- 联合索引（a,b,c）：Select * From t where a = ?  and b > ? and c = ?   如何查看哪几个数据用了索引
- 缓存数据库一致性保证
- 代码题：将字符串转为浮点数（“1.23” - > 1.23）



# 得物一面

- 使用Redis 锁需要考虑哪些？
- Redis锁如何进行续期。
- 线程池的工作原理。
- 为什么打印日志过多CPU会飙升。
- 幂等的实现方式。
- 分布式的概念。
- 分布式事务介绍一下。
- 缓存穿透和解决方法。
- 布隆过滤器的工作原理，他能解决什么问题，不能解决什么问题。
- 如何减少布隆过滤器的漏检率。

- Young gc排查
- 慢查询排查和解决。
- 负责的业务系统的架构，以及实现。
- 发券量。
- 代码题：反转链表

#  得物二面

1. 说一下你了解的微服务架构

2. 如何进行服务注册和发现

3. 说一下原子类是什么，他的原理，以及他能解决哪些问题

4. 分布式消息事务（先插数据库，然后再发消息，如何保证最终一致性）

5. 限流常见的算法，令牌桶算法和滑动窗口计数算法的比较

6. 如何知道你的项目的业务效果

7. 非精准限流扩缩容被限流问题如何解决？

8. 线程池线程数量怎么设置，如何知道线程池配置的是否合理

9. 你们做了哪些事情来避免资损？  

   要考虑资损的口径是什么？

   1. 配券： 针对金额上做卡控，大额券的卡控，发券数量的卡控，比如会有审批流，风控审核等
   2. 发券：发券配置发券渠道卡控
   3. 用券：

10. 你们组后续怎么发展才能支撑业务，业务上有什么痛点需要你们来解决
    1. 如何快速迭代
    2. 稳定性保障

11. 如果让你设计一个优惠券系统，你会怎么设计才会避免上述的问题

# 阿里一面

- 如何用guava限流器实现一个指定券ID限流的限流器，如果一台机器有100万个券ID的访问，怎么防止内存泄漏
- **消息丢失的情况：你们系统的ack是怎么设置的**： done 说一下不同ack的值的定义以及对性能的影响
- **消息积压的情况：有诊断过消费积压是IO的瓶颈还是CPU的瓶颈吗**： 看机器指标，CPU占用情况，如果CPU正常，考虑不是CPU的瓶颈，所以通过增加线程池的方式来处理。
- **假如出现了消息丢失的情况，造成了你们的比对不一致，你们是怎么排查和解决的？**done（排查是生产者原因，还是消费者原因，还是kafka原因）。
- **有用过其他的消息队列吗？**：done 去学习一下其他消息队列。
- **线程池的参数怎么设置。**： 根据下游的实际情况进行设置 done
- **有没有遇到过线程池被打满的情况，怎么解决。**：如果线程池被打满了，应该会有失败的告警，一般是因为任务执行时间过长导致的。可以看下堆栈信息，是不是发生死锁了，如果是RPC调用，可以看下下游的耗时情况，然后做进一步的处理。
- **如何排查Full GC** ：done
- 你们的机器配置：4c 16g 或者 2c 16g
- java新版本特性
- 双亲委派机制
- JVM运行时数据
- G1垃圾回收器和CMC回收器的比较

